assign:
  CULT_REGISTRY: quay.io/stimela2
  CULT_VERSION: 0.1.1

  # standard variables used in templated Docker files
  pre_install: ''
  post_install: ''
  extra_deps: ''

images:
  base-cult:
    versions:
      base:
        version: '{CULT_VERSION}'

  wsclean:
    versions:
      kern7: 
        dockerfile: Dockerfile.kern7
      ## 2.9 won't build with this recipe, figure it out later
      # '2.9':
      #   dockerfile: Dockerfile.build.2x
      #   tag: wsclean2.9
      '2.10.1':
        dockerfile: Dockerfile.build
        tag: v2.10.1
      '3.0.1':
        dockerfile: Dockerfile.build
        tag: v3.0.1
      '3.1':
        dockerfile: Dockerfile.build
        tag: v3.1
      '3.2':
        dockerfile: Dockerfile.build
        tag: v3.2
      '3.3':
        dockerfile: Dockerfile.build
        tag: v3.3

  python-astro:
    versions:
      '3.10': {}
      '3.9': {}
      '3.8': {}

  casa:
    assign:
      url: https://casa.nrao.edu/download/distro/casa/release/el7
    versions:
      _base:
        dockerfile: Dockerfile.base
      '4.7.2':
        tarball: casa-release-4.7.2-el7.tar.gz
        entrypoint: /casa-release-4.7.2-el7/bin/casa
      '5.8.0': 
        tarball: casa-release-5.8.0-109.el7.tar.gz
        entrypoint: /casa-release-5.8.0-109.el7/bin/casa

  casa6:
    versions:
      '6.5': 
          wheel_version: 6.5.5.20

  breizorro:
    versions:
      '0.1.1':
        package: breizorro==0.1.1
      latest: 
        package: breizorro
      master:
        package: git+https://github.com/ratt-ru/breizorro

  shadems:
    versions:
      '0.5.3':
        package: shadems==0.5.3
      latest: 
        package: shadems
      master:
        package: git+https://github.com/ratt-ru/shadeMS
      
  crystalball:
    versions:
      # '0.3.0':
      #   package: crystalball==0.3.0
#      latest: 
#         package: crystalball  # doesn't work?
      master:
        package: git+https://github.com/caracal-pipeline/crystalball

  tricolour:
    # assign:
    #  pre_install: RUN pip uninstall -y bokeh # bokeh causes deps conflict with numpy pin in tricolour
    #   extra_deps: numpy\<1.20 numba==0.54.0 bokeh\<3 psutil
    versions:
      '0.1.8.1':
        package: tricolour==0.1.8
      latest: 
        package: tricolour
      master:
        package: git+https://github.com/ratt-ru/tricolour

  smops:
    versions:
      '0.1.7':
        package: smops==0.1.7
      latest: 
        package: smops
      master:
        package: git+https://github.com/Mulan-94/smops

  msutils:
    versions:
      '1.2.0':
        package: msutils==1.2.0
      latest: 
        package: msutils
      master:
        package: git+https://github.com/SpheMakh/msutils

  quartical:
    versions:
      base:
        package: git+https://github.com/ratt-ru/QuartiCal@stimelation

  cubical:
    versions:
      base:
        package: git+https://github.com/ratt-ru/CubiCal


  mosaic-queen:
    assign:
      pre_install: RUN apt update && apt install -y montage && rm -rf /var/lib/apt/lists/* && rm -rf /var/cache/apt/archives
    versions:
      '1.1.1':
        package: mosaic-queen==1.1.1
      latest:
        package: mosaic-queen
      master:
        package: git+https://github.com/caracal-pipeline/MosaicQueen

  spimple:
    versions:
      master:
        package: git+https://github.com/landmanbester/spimple.git
      base:
        package: git+https://github.com/landmanbester/spimple.git@dropzweights

  aimfast:
    versions:
      '1.3.4':
        package: aimfast==1.3.4
      base:
        package: git+https://github.com/Athanaseus/aimfast.git

  rfinder:
    versions:
      master:
        package: git+https://github.com/caracal-pipeline/RFInder.git
