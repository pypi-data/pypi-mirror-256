import{S as ge,i as he,s as pe,C as ee,k as Q,a as Z,l as T,m as O,c as G,h as S,n as U,_ as te,b as H,U as P,Y as we,D as le,E as ne,F as re,v as L,d as g,f as j,g as d,y as C,z as F,A as B,B as V,I as Ee,H as se,w as Se,J as De,K as ze,e as J,Z as R,V as W,aa as Ie}from"./index.cbae6e09.js";import{C as Ce,a as Fe}from"./ChevronUp.ef2a0929.js";import{f as Be,bn as Ve,aa as K,aF as Ne,a9 as Y,_ as Pe,S as X,a1 as Qe,ap as be,bB as $e,b as M}from"./Modal.b01639a1.js";import{g as Te}from"./settingsStore.8e195625.js";const Oe=i=>({}),ie=i=>({}),Ue=i=>({}),oe=i=>({});function qe(i){let t,l;return t=new Ce({}),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){B(t,e,n),l=!0},i(e){l||(d(t.$$.fragment,e),l=!0)},o(e){g(t.$$.fragment,e),l=!1},d(e){V(t,e)}}}function Le(i){let t,l;return t=new Fe({}),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){B(t,e,n),l=!0},i(e){l||(d(t.$$.fragment,e),l=!0)},o(e){g(t.$$.fragment,e),l=!1},d(e){V(t,e)}}}function je(i){let t,l,e,n,c,r,o,s,u,_,D;const z=i[2].above,h=ee(z,i,i[1],oe),q=[Le,qe],E=[];function y(a,m){return a[0]?0:1}c=y(i),r=E[c]=q[c](i);const p=i[2].below,f=ee(p,i,i[1],ie);return{c(){t=Q("div"),l=Q("button"),e=Q("div"),h&&h.c(),n=Z(),r.c(),o=Z(),s=Q("div"),f&&f.c(),this.h()},l(a){t=T(a,"DIV",{class:!0});var m=O(t);l=T(m,"BUTTON",{class:!0});var k=O(l);e=T(k,"DIV",{class:!0});var v=O(e);h&&h.l(v),n=G(v),r.l(v),v.forEach(S),k.forEach(S),o=G(m),s=T(m,"DIV",{class:!0});var I=O(s);f&&f.l(I),I.forEach(S),m.forEach(S),this.h()},h(){U(e,"class","flex items-center justify-between gap-x-3"),U(l,"class","w-full p-4 text-left hover:bg-gray-200"),U(s,"class","p-4"),te(s,"hidden",!i[0]),U(t,"class","rounded-xl border border-gray-300")},m(a,m){H(a,t,m),P(t,l),P(l,e),h&&h.m(e,null),P(e,n),E[c].m(e,null),P(t,o),P(t,s),f&&f.m(s,null),u=!0,_||(D=we(l,"click",i[3]),_=!0)},p(a,[m]){h&&h.p&&(!u||m&2)&&le(h,z,a,a[1],u?re(z,a[1],m,Ue):ne(a[1]),oe);let k=c;c=y(a),c!==k&&(L(),g(E[k],1,1,()=>{E[k]=null}),j(),r=E[c],r||(r=E[c]=q[c](a),r.c()),d(r,1),r.m(e,null)),f&&f.p&&(!u||m&2)&&le(f,p,a,a[1],u?re(p,a[1],m,Oe):ne(a[1]),ie),(!u||m&1)&&te(s,"hidden",!a[0])},i(a){u||(d(h,a),d(r),d(f,a),u=!0)},o(a){g(h,a),g(r),g(f,a),u=!1},d(a){a&&S(t),h&&h.d(a),E[c].d(),f&&f.d(a),_=!1,D()}}}function Ae(i,t,l){let{$$slots:e={},$$scope:n}=t,{expanded:c=!1}=t;const r=()=>l(0,c=!c);return i.$$set=o=>{"expanded"in o&&l(0,c=o.expanded),"$$scope"in o&&l(1,n=o.$$scope)},[c,n,e,r]}class rt extends ge{constructor(t){super(),he(this,t,Ae,je,pe,{expanded:0})}}function ae(i,t,l){const e=i.slice();return e[23]=t[l],e}function ce(i,t,l){const e=i.slice();return e[26]=t[l],e}function fe(i,t,l){const e=i.slice();return e[1]=t[l],e}function He(i){let t,l;return t=new X({props:{size:i[2],labelText:"Dataset",selected:i[9],$$slots:{default:[Ye]},$$scope:{ctx:i}}}),t.$on("change",i[13]),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){B(t,e,n),l=!0},p(e,n){const c={};n[0]&4&&(c.size=e[2]),n[0]&512&&(c.selected=e[9]),n[0]&16|n[1]&1&&(c.$$scope={dirty:n,ctx:e}),t.$set(c)},i(e){l||(d(t.$$.fragment,e),l=!0)},o(e){g(t.$$.fragment,e),l=!1},d(e){V(t,e)}}}function Je(i){let t,l;return t=new be({props:{kind:"error",title:"Error",subtitle:i[6].error.message,hideCloseButton:!0}}),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){B(t,e,n),l=!0},p(e,n){const c={};n[0]&64&&(c.subtitle=e[6].error.message),t.$set(c)},i(e){l||(d(t.$$.fragment,e),l=!0)},o(e){g(t.$$.fragment,e),l=!1},d(e){V(t,e)}}}function Ke(i){let t,l;return t=new $e({}),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){B(t,e,n),l=!0},p:W,i(e){l||(d(t.$$.fragment,e),l=!0)},o(e){g(t.$$.fragment,e),l=!1},d(e){V(t,e)}}}function ue(i){let t,l;return t=new M({props:{value:`${i[1].namespace}/${i[1].dataset_name}`}}),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){B(t,e,n),l=!0},p(e,n){const c={};n[0]&16&&(c.value=`${e[1].namespace}/${e[1].dataset_name}`),t.$set(c)},i(e){l||(d(t.$$.fragment,e),l=!0)},o(e){g(t.$$.fragment,e),l=!1},d(e){V(t,e)}}}function Ye(i){let t,l,e,n;t=new M({props:{value:"",text:"none"}});let c=i[4],r=[];for(let s=0;s<c.length;s+=1)r[s]=ue(fe(i,c,s));const o=s=>g(r[s],1,1,()=>{r[s]=null});return{c(){C(t.$$.fragment),l=Z();for(let s=0;s<r.length;s+=1)r[s].c();e=J()},l(s){F(t.$$.fragment,s),l=G(s);for(let u=0;u<r.length;u+=1)r[u].l(s);e=J()},m(s,u){B(t,s,u),H(s,l,u);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(s,u);H(s,e,u),n=!0},p(s,u){if(u[0]&16){c=s[4];let _;for(_=0;_<c.length;_+=1){const D=fe(s,c,_);r[_]?(r[_].p(D,u),d(r[_],1)):(r[_]=ue(D),r[_].c(),d(r[_],1),r[_].m(e.parentNode,e))}for(L(),_=c.length;_<r.length;_+=1)o(_);j()}},i(s){if(!n){d(t.$$.fragment,s);for(let u=0;u<c.length;u+=1)d(r[u]);n=!0}},o(s){g(t.$$.fragment,s),r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)g(r[u]);n=!1},d(s){V(t,s),s&&S(l),R(r,s),s&&S(e)}}}function Ze(i){let t,l;return t=new X({props:{size:i[2],labelText:"Field",selected:i[8],$$slots:{default:[Re]},$$scope:{ctx:i}}}),t.$on("change",i[14]),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){B(t,e,n),l=!0},p(e,n){const c={};n[0]&4&&(c.size=e[2]),n[0]&256&&(c.selected=e[8]),n[0]&8|n[1]&1&&(c.$$scope={dirty:n,ctx:e}),t.$set(c)},i(e){l||(d(t.$$.fragment,e),l=!0)},o(e){g(t.$$.fragment,e),l=!1},d(e){V(t,e)}}}function Ge(i){let t,l;return t=new be({props:{kind:"error",title:"Error",subtitle:i[5].error.message,hideCloseButton:!0}}),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){B(t,e,n),l=!0},p(e,n){const c={};n[0]&32&&(c.subtitle=e[5].error.message),t.$set(c)},i(e){l||(d(t.$$.fragment,e),l=!0)},o(e){g(t.$$.fragment,e),l=!1},d(e){V(t,e)}}}function Me(i){let t,l;return t=new $e({}),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){B(t,e,n),l=!0},p:W,i(e){l||(d(t.$$.fragment,e),l=!0)},o(e){g(t.$$.fragment,e),l=!1},d(e){V(t,e)}}}function _e(i){let t,l;return t=new M({props:{value:Y(i[26].path)}}),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){B(t,e,n),l=!0},p(e,n){const c={};n[0]&8&&(c.value=Y(e[26].path)),t.$set(c)},i(e){l||(d(t.$$.fragment,e),l=!0)},o(e){g(t.$$.fragment,e),l=!1},d(e){V(t,e)}}}function Re(i){let t,l,e=i[3],n=[];for(let r=0;r<e.length;r+=1)n[r]=_e(ce(i,e,r));const c=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=J()},l(r){for(let o=0;o<n.length;o+=1)n[o].l(r);t=J()},m(r,o){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,o);H(r,t,o),l=!0},p(r,o){if(o[0]&8){e=r[3];let s;for(s=0;s<e.length;s+=1){const u=ce(r,e,s);n[s]?(n[s].p(u,o),d(n[s],1)):(n[s]=_e(u),n[s].c(),d(n[s],1),n[s].m(t.parentNode,t))}for(L(),s=e.length;s<n.length;s+=1)c(s);j()}},i(r){if(!l){for(let o=0;o<e.length;o+=1)d(n[o]);l=!0}},o(r){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)g(n[o]);l=!1},d(r){R(n,r),r&&S(t)}}}function me(i){let t,l,e;function n(r){i[21](r)}let c={size:i[2],labelText:"Embedding",$$slots:{default:[We]},$$scope:{ctx:i}};return i[0]!==void 0&&(c.selected=i[0]),t=new X({props:c}),Se.push(()=>De(t,"selected",n)),{c(){C(t.$$.fragment)},l(r){F(t.$$.fragment,r)},m(r,o){B(t,r,o),e=!0},p(r,o){const s={};o[0]&4&&(s.size=r[2]),o[0]&128|o[1]&1&&(s.$$scope={dirty:o,ctx:r}),!l&&o[0]&1&&(l=!0,s.selected=r[0],ze(()=>l=!1)),t.$set(s)},i(r){e||(d(t.$$.fragment,r),e=!0)},o(r){g(t.$$.fragment,r),e=!1},d(r){V(t,r)}}}function de(i){let t,l;return t=new M({props:{value:i[23]}}),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,n){B(t,e,n),l=!0},p(e,n){const c={};n[0]&128&&(c.value=e[23]),t.$set(c)},i(e){l||(d(t.$$.fragment,e),l=!0)},o(e){g(t.$$.fragment,e),l=!1},d(e){V(t,e)}}}function We(i){let t,l,e=i[7],n=[];for(let r=0;r<e.length;r+=1)n[r]=de(ae(i,e,r));const c=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=J()},l(r){for(let o=0;o<n.length;o+=1)n[o].l(r);t=J()},m(r,o){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,o);H(r,t,o),l=!0},p(r,o){if(o[0]&128){e=r[7];let s;for(s=0;s<e.length;s+=1){const u=ae(r,e,s);n[s]?(n[s].p(u,o),d(n[s],1)):(n[s]=de(u),n[s].c(),d(n[s],1),n[s].m(t.parentNode,t))}for(L(),s=e.length;s<n.length;s+=1)c(s);j()}},i(r){if(!l){for(let o=0;o<e.length;o+=1)d(n[o]);l=!0}},o(r){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)g(n[o]);l=!1},d(r){R(n,r),r&&S(t)}}}function Xe(i){let t,l,e,n,c,r,o,s,u,_,D;const z=[Ke,Je,He],h=[];function q(a,m){return a[6].isLoading?0:a[6].isError?1:a[4]&&a[4].length>0?2:-1}~(e=q(i))&&(n=h[e]=z[e](i));const E=[Me,Ge,Ze],y=[];function p(a,m){var k,v;return(k=a[5])!=null&&k.isLoading?0:(v=a[5])!=null&&v.isError?1:a[3]!=null&&a[3].length>0?2:-1}~(o=p(i))&&(s=y[o]=E[o](i));let f=i[7].length>0&&me(i);return{c(){t=Q("div"),l=Q("div"),n&&n.c(),c=Z(),r=Q("div"),s&&s.c(),u=Z(),_=Q("div"),f&&f.c(),this.h()},l(a){t=T(a,"DIV",{class:!0});var m=O(t);l=T(m,"DIV",{class:!0});var k=O(l);n&&n.l(k),k.forEach(S),c=G(m),r=T(m,"DIV",{class:!0});var v=O(r);s&&s.l(v),v.forEach(S),u=G(m),_=T(m,"DIV",{class:!0});var I=O(_);f&&f.l(I),I.forEach(S),m.forEach(S),this.h()},h(){U(l,"class","w-1/3"),U(r,"class","w-1/3"),U(_,"class","w-1/3"),U(t,"class","flex w-full flex-row gap-x-4")},m(a,m){H(a,t,m),P(t,l),~e&&h[e].m(l,null),P(t,c),P(t,r),~o&&y[o].m(r,null),P(t,u),P(t,_),f&&f.m(_,null),D=!0},p(a,m){let k=e;e=q(a),e===k?~e&&h[e].p(a,m):(n&&(L(),g(h[k],1,1,()=>{h[k]=null}),j()),~e?(n=h[e],n?n.p(a,m):(n=h[e]=z[e](a),n.c()),d(n,1),n.m(l,null)):n=null);let v=o;o=p(a),o===v?~o&&y[o].p(a,m):(s&&(L(),g(y[v],1,1,()=>{y[v]=null}),j()),~o?(s=y[o],s?s.p(a,m):(s=y[o]=E[o](a),s.c()),d(s,1),s.m(r,null)):s=null),a[7].length>0?f?(f.p(a,m),m[0]&128&&d(f,1)):(f=me(a),f.c(),d(f,1),f.m(_,null)):f&&(L(),g(f,1,1,()=>{f=null}),j())},i(a){D||(d(n),d(s),d(f),D=!0)},o(a){g(n),g(s),g(f),D=!1},d(a){a&&S(t),~e&&h[e].d(),~o&&y[o].d(),f&&f.d()}}}function xe(i,t,l){let e,n,c,r,o,s,u,_,D,z,h=W,q=()=>(h(),h=Ie(c,b=>l(5,z=b)),c),E,y;i.$$.on_destroy.push(()=>h());let{dataset:p=void 0}=t,{path:f=void 0}=t,{embedding:a=void 0}=t,{inputSize:m=void 0}=t;const k=Ee(),v=Te();se(i,v,b=>l(20,y=b));let I;const x=Be();se(i,x,b=>l(6,E=b));function ke(b){const $=b.target.value;if($==="")l(1,p=null);else{const[w,N]=$.split("/");l(1,p={namespace:w,name:N})}}function ve(b){const $=b.target.value;l(15,f=Qe($))}function ye(b){a=b,l(0,a),l(17,_),l(15,f),l(16,I),l(3,u),l(5,z),l(19,s)}return i.$$set=b=>{"dataset"in b&&l(1,p=b.dataset),"path"in b&&l(15,f=b.path),"embedding"in b&&l(0,a=b.embedding),"inputSize"in b&&l(2,m=b.inputSize)},i.$$.update=()=>{var b;if(i.$$.dirty[0]&1048576&&l(18,e=[y.embedding,"gte-small","gte-base","openai","sbert"]),i.$$.dirty[0]&64&&l(4,n=(b=E.data)==null?void 0:b.sort(($,w)=>$.namespace===w.namespace?$.dataset_name.localeCompare(w.dataset_name):$.namespace.localeCompare(w.namespace))),i.$$.dirty[0]&18&&n&&n.length>0&&p===void 0&&l(1,p={namespace:n[0].namespace,name:n[0].dataset_name}),i.$$.dirty[0]&2&&q(l(10,c=p!=null?Ve(p==null?void 0:p.namespace,p==null?void 0:p.name):null)),i.$$.dirty[0]&2&&l(9,r=p?`${p.namespace}/${p.name}`:""),i.$$.dirty[0]&32&&l(16,I=z==null?void 0:z.data),i.$$.dirty[0]&65536&&l(19,s=I?K(I).filter($=>!Ne($)&&$.dtype!=null):null),i.$$.dirty[0]&524288&&l(3,u=s!=null?s.filter($=>K($).some(w=>w.signal!=null&&K(w).some(N=>{var A;return((A=N.dtype)==null?void 0:A.type)==="embedding"}))):null),i.$$.dirty[0]&32776&&f!=null&&u!=null){const $=Y(f);u.some(N=>Y(N.path)===$)||l(15,f=void 0)}i.$$.dirty[0]&32776&&u!=null&&u.length>0&&f==null&&l(15,f=u[0].path),i.$$.dirty[0]&32768&&l(8,o=f?Y(f):void 0),i.$$.dirty[0]&98304&&l(17,_=f&&I?K(Pe(I,f)).filter($=>$.signal!=null&&K($).some(w=>{var N;return((N=w.dtype)==null?void 0:N.type)==="embedding"})):[]),i.$$.dirty[0]&393216&&l(7,D=_.map($=>$.signal.signal_name).sort(($,w)=>{let N=e.indexOf($),A=e.indexOf(w);return N===-1&&(N=e.length),A===-1&&(A=e.length),N-A})),i.$$.dirty[0]&131073&&a!=null&&(_.some(w=>w.path.at(-1)===a)||l(0,a=void 0)),i.$$.dirty[0]&32771&&p!=null&&f!=null&&a!=null&&k("change",{dataset:p,path:f,embedding:a})},[a,p,m,u,n,z,E,D,o,r,c,v,x,ke,ve,f,I,_,e,s,y,ye]}class st extends ge{constructor(t){super(),he(this,t,xe,Xe,pe,{dataset:1,path:15,embedding:0,inputSize:2},null,[-1,-1])}}export{st as D,rt as E};
