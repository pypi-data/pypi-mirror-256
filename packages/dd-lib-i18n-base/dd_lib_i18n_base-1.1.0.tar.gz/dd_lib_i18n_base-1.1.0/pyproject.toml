[tool.poetry]
name = "dd-lib-i18n-base"
version = "1.1.0"
description = "This is a python library for defining internationalised messages and errors. It is not within the remit of the library to manage any translation files."
authors = ["Your Name <you@example.com>"]

[[tool.poetry.source]]
name = "artifactory"
url = "https://deeperinsights.jfrog.io/artifactory/api/pypi/deeper-insights-pypi/simple"

[tool.poetry.dependencies]
python = "^3.9"
di-logging = "^1"

[tool.poetry.dev-dependencies]
pyright = "^1.1.336"
pytest = "^7.1.3"
taskipy = "^1.2.0"
pytest-cov = "^4.0.0"
pytest-mock = "^3.10.0"
pytest-ruff = "^0.2.1"
ruff = "^0.1.5"

[tool.pyright]
include = ["dd_lib_i18n_base"]
exclude = [  # Do not process these files
    "**/node_modules",
    "**/__pycache__",
    ".venv/**",
]
defineConstant = { DEBUG = true }
ignore = ["tests"]  # Process these files, but ignore errors
# stubPath = "src/stubs"
reportMissingImports = true
reportMissingTypeStubs = false
pythonVersion = "3.9"
pythonPlatform = "Linux"
executionEnvironments = [{ root = "dd_lib_i18n_base" }]

[tool.taskipy.tasks]
# Coverage runs all tests & checks - used in CI
coverage = "pyright . && pytest --ruff --ruff-format -ra -v --cov=. --cov-report=xml:test-coverage.xml --cov-fail-under=75 --maxfail=3 --junitxml=test-results.xml"
debug = "python -m debugpy --listen 0.0.0.0:5678 --wait-for-client /usr/local/bin/pytest"
format = "ruff format -n . && ruff check -n --fix ."
test = "pytest --ruff --ruff-format --cache-clear -ra -v"
typecheck = "pyright ."

[tool.ruff]
select = ["E", "F", "D", "I"]
# Docstring Ignores:
# D100 - Missing docstring in public module
# D103 - Missing docstring in public function
# D104 - Missing docstring in public package
# D105 - Missing docstring in magic method
# D107 - Missing docstring in __init__
# D202 - No blank lines allowed after function docstring
# D203 - 1 blank line required before class docstring
# D213 - Multi-line docstring summary should start at the first line
# D400 - First line should end with a period
# D401 - First line should be in imperative mood
# D406 - Section name should end with a newline
# D407 - Missing dashed underline after section
# D413 - Missing blank line after last section
# D415 - First line should end with a period, question mark, or exclamation point
ignore = ["D100", "D103", "D104", "D105", "D107", "D202", "D203", "D212", "D400", "D401", "D406", "D407", "D413", "D415"]
line-length = 95

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "auto"

[tool.ruff.lint.isort]
known-first-party = ["dd_lib_i18n_base"]
section-order = ["future", "standard-library", "third-party", "first-party", "local-folder"]

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

