BaseClass:
    egse.dpu.DPUInterface

ProxyClass:
    egse.dpu.DPUProxy

ControlServerClass:
    egse.dpu.dpu_cs.DPUControlServer

ControlServer:
    egse.dpu.dpu_cs

UserInterface:
    egse.dpu.dpu_ui

Commands:

    # Each of these groups is parsed and used on both the server and the client side.
    # The group name (e.g. is_simulator) will be monkey patched in the Proxy class for the device or service.
    # The other field are:
    #   description:   Used by the doc_string method to generate a help string
    #   cmd:           Command string that will eventually be send to the hardware controller for the
    #                  device.
    #   device_method: The name of the method to be called on the device class.
    #                  These should all be defined by the base class for the device, i.e. HexapodBase.
    #   response:      The name of the method to be called from the devive protocol.
    #                  This method should exist in the subclass of the CommandProtocol base class, i.e.
    #                  in this case it will be the HexapodProtocol class.

    is_simulator:
        description:    Returns True

    # DPU commands

    marker:
        description:    Send a marker to the DPU
        cmd:            "{marker}"

    get_slicing:
        description:    Request the number of cycles to use for slicing as a hint for the FITS generation.

    set_slicing:
        description:    Set a slicing hint for the FITS generation.
        cmd:            "{n_cycles}"

    get_register_map:
        description:    Return the current RegisterMap from the DPU Processor


    # N-FEE commands

    n_fee_sync_register_map:
        description:    Read and sync the register map from the N-FEE on the DPU Processor.

    n_fee_get_mode:
        description:    Request the mode of the N-FEE.

    n_fee_get_sync_mode:
        description:    Request the sync mode of the N-FEE.

    n_fee_is_dump_mode:
        description:    Returns True if the N-FEE is configured for DUMP mode.

    n_fee_set_immediate_on_mode:
        description:    Command the N-FEE to go into IMMEDIATE ON mode.

    n_fee_set_on_mode:
        description:    Command the N-FEE to go into ON mode.

                        This will change the `ccd_mode_config` in register `reg_21_config` to `n_fee_mode.ON_MODE`.
                        No other registers will be changed by this command.

    n_fee_set_standby_mode:
        description:    Command the N-FEE to go into STANDBY mode.

                        This will change the `ccd_mode_config` in register `reg_21_config` to `n_fee_mode.STAND_BY_MODE`.
                        No other registers will be changed by this command.

    n_fee_set_dump_mode:
        description:    Command the N-FEE to go into DUMP mode.
        cmd:            "{n_fee_parameters}"

    n_fee_set_dump_mode_int_sync:
        description:    Command the N-FEE to go into DUMP mode internal sync.
        cmd:            "{n_fee_parameters}"

    n_fee_set_full_image_mode:
        description:    Command the N-FEE to go into FULL_IMAGE mode.

                        This will set the `ccd_mode_config` in the `reg_21_config` to the value for FULL_IMAGE_MODE (0x05).
        cmd:            "{n_fee_parameters}"

    n_fee_set_full_image_mode_int_sync:
        description:    Command the N-FEE to go into FULL_IMAGE mode and internal sync.

                        This will set the `ccd_mode_config` in the `reg_21_config` to the value for FULL_IMAGE_MODE (0x05).
        cmd:            "{n_fee_parameters}"

    n_fee_set_full_image_pattern_mode:
        description:    Command the N-FEE to go into FULL_IMAGE_PATTERN mode.

                        This will set the `ccd_mode_config` in the `reg_21_config` to the value for FULL_IMAGE_PATTERN_MODE (0x01).
        cmd:            "{n_fee_parameters}"

    n_fee_set_internal_sync:
        description:    Command the N-FEE to go into internal sync mode. The internal sync Timer will generate 400ms
                        sync pulses indefenitly.

                        This will change the `sync_sel` value in the register `reg_5_config` to 1.

                        There is an additional related register setting `int_sync_period` in register `reg_4_config`
                        which defines the sync period in milliseconds.
        cmd:            "{n_fee_parameters}"

    n_fee_set_external_sync:
        description:    Command the N-FEE to go into external sync mode. The external sync pulses are generated by the
                        AEU, which generates one 400ms pulse followed by three 200ms pulses.

                        This will change the `sync_sel` value in the register `reg_5_config` to 0.
        cmd:            "{n_fee_parameters}"

    n_fee_high_precision_hk_mode:
        description:    Set the N-FEE in high precision HK mode
        cmd:            "{n_fee_parameters}"

    n_fee_set_register_value:
        description:    Set the given register poarameter to the given value
        cmd:            "{reg_name} {field_name} {field_value}"

    n_fee_reset:
        description:    Reset the N-FEE to its default settings

    n_fee_set_clear_error_flags:
        description:  Command the N-FEE to clear all error flags for non RMAP/SpW related functions immediately.  The
                      `clear_error_flag` bit in the register map is set to 1, meaning that all error flags that are
                      generated by  the N-FEE FPGA for non RMAP-SpW related functions are cleared immediately.  This
                      bit is cleared automatically, so that any future error flags can be latched again.  If the error
                      conditions persist and no corrective measures are taken, then error flags would be set again.

    n_fee_set_reverse_clocking:
        description:    Set the N-FEE in reverse clocking mode
        cmd:            "{n_fee_parameters}"

    n_fee_set_charge_injection:
        description:    Enable charge injection in the N-FEE
        cmd:            "{n_fee_parameters}"

    n_fee_set_vgd:
        description:    Set the VGD config parameter in the N-FEE
        cmd:            "{n_fee_parameters}"

    n_fee_set_fpga_defaults:
        description:    Set the default FPGA values in the N-FEE
