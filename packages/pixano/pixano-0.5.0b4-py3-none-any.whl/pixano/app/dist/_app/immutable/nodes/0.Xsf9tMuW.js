import{s as W,G as O,H as K,J as X,L as Z,M as x,N as ee,e as L,a as P,c as S,b as T,l as fe,g as H,f as h,m as b,i as R,h as w,n as se,t as ae,q as we,d as le,u as ke,o as he,j as ue,x as me,y as Te,r as Pe,w as He,A as je}from"../chunks/scheduler.HHbpe561.js";import{S as q,i as J,b as j,d as y,m as B,a as g,t as k,e as U,g as te,c as ne}from"../chunks/index.zjc5z22-.js";import{p as Ae}from"../chunks/stores.l6WXagUq.js";import{a as ye,b as Be,s as Ue,c as Re,g as ze}from"../chunks/api.qN65L_Kf.js";import"../chunks/command.I2m8XSFA.js";import{a as Oe}from"../chunks/icons.F8-E9kv1.js";import{d as de,e as Ie,s as _e,i as Fe,a as Ne,m as Ge,c as Ke}from"../chunks/datasetStores.ixD7r-qb.js";import{g as pe}from"../chunks/entry.IGbnXg9x.js";import{T as $e,C as We}from"../chunks/TooltipIconButton.N-WJ-PlI.js";import{P as qe}from"../chunks/PrimaryButton.6RbWXLKK.js";import{I as re,g as oe,a as ce,L as Je}from"../chunks/loader-2.5mhkmLPp.js";const Qe=!1,Ye=!1,Yt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Qe,ssr:Ye},Symbol.toStringTag,{value:"Module"}));function Xe(r){let e;const a=r[2].default,t=X(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Z(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||(g(t,s),e=!0)},o(s){k(t,s),e=!1},d(s){t&&t.d(s)}}}function Ze(r){let e,a;const t=[{name:"arrow-left-circle"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[Xe]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=O(s,t[n]);return e=new re({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){B(e,n,l),a=!0},p(n,[l]){const c=l&3?oe(t,[t[0],l&2&&ce(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(c.$$scope={dirty:l,ctx:n}),e.$set(c)},i(n){a||(g(e.$$.fragment,n),a=!0)},o(n){k(e.$$.fragment,n),a=!1},d(n){U(e,n)}}}function xe(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M16 12H8"}],["path",{d:"m12 8-4 4 4 4"}]];return r.$$set=l=>{a(1,e=O(O({},e),K(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=K(e),[n,e,t,s]}class et extends q{constructor(e){super(),J(this,e,xe,Ze,W,{})}}function tt(r){let e;const a=r[2].default,t=X(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Z(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||(g(t,s),e=!0)},o(s){k(t,s),e=!1},d(s){t&&t.d(s)}}}function nt(r){let e,a;const t=[{name:"arrow-left"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[tt]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=O(s,t[n]);return e=new re({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){B(e,n,l),a=!0},p(n,[l]){const c=l&3?oe(t,[t[0],l&2&&ce(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(c.$$scope={dirty:l,ctx:n}),e.$set(c)},i(n){a||(g(e.$$.fragment,n),a=!0)},o(n){k(e.$$.fragment,n),a=!1},d(n){U(e,n)}}}function st(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];return r.$$set=l=>{a(1,e=O(O({},e),K(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=K(e),[n,e,t,s]}class at extends q{constructor(e){super(),J(this,e,st,nt,W,{})}}function lt(r){let e;const a=r[2].default,t=X(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Z(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||(g(t,s),e=!0)},o(s){k(t,s),e=!1},d(s){t&&t.d(s)}}}function rt(r){let e,a;const t=[{name:"arrow-right"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[lt]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=O(s,t[n]);return e=new re({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){B(e,n,l),a=!0},p(n,[l]){const c=l&3?oe(t,[t[0],l&2&&ce(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(c.$$scope={dirty:l,ctx:n}),e.$set(c)},i(n){a||(g(e.$$.fragment,n),a=!0)},o(n){k(e.$$.fragment,n),a=!1},d(n){U(e,n)}}}function ot(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];return r.$$set=l=>{a(1,e=O(O({},e),K(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=K(e),[n,e,t,s]}class ct extends q{constructor(e){super(),J(this,e,ot,rt,W,{})}}function it(r){let e;const a=r[2].default,t=X(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Z(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||(g(t,s),e=!0)},o(s){k(t,s),e=!1},d(s){t&&t.d(s)}}}function ft(r){let e,a;const t=[{name:"database"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[it]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=O(s,t[n]);return e=new re({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){B(e,n,l),a=!0},p(n,[l]){const c=l&3?oe(t,[t[0],l&2&&ce(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(c.$$scope={dirty:l,ctx:n}),e.$set(c)},i(n){a||(g(e.$$.fragment,n),a=!0)},o(n){k(e.$$.fragment,n),a=!1},d(n){U(e,n)}}}function ut(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];return r.$$set=l=>{a(1,e=O(O({},e),K(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=K(e),[n,e,t,s]}class mt extends q{constructor(e){super(),J(this,e,ut,ft,W,{})}}const dt=mt;function _t(r){let e;const a=r[2].default,t=X(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Z(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||(g(t,s),e=!0)},o(s){k(t,s),e=!1},d(s){t&&t.d(s)}}}function pt(r){let e,a;const t=[{name:"home"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[_t]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=O(s,t[n]);return e=new re({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){B(e,n,l),a=!0},p(n,[l]){const c=l&3?oe(t,[t[0],l&2&&ce(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(c.$$scope={dirty:l,ctx:n}),e.$set(c)},i(n){a||(g(e.$$.fragment,n),a=!0)},o(n){k(e.$$.fragment,n),a=!1},d(n){U(e,n)}}}function ht(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}],["polyline",{points:"9 22 9 12 15 12 15 22"}]];return r.$$set=l=>{a(1,e=O(O({},e),K(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=K(e),[n,e,t,s]}class $t extends q{constructor(e){super(),J(this,e,ht,pt,W,{})}}const gt=$t,vt=""+new URL("../assets/pixano_white.VSj0ppjx.png",import.meta.url).href;function De(r){let e,a,t=r[0]?.length+"",s,n,l,c="datasets",o,f,$,E=r[0].reduce(Ce,0)+"",V,u,m,I="items",C,A,z,v,M,D,F,i,d,N;return{c(){e=L("div"),a=L("span"),s=ae(t),n=P(),l=L("span"),l.textContent=c,o=P(),f=L("div"),$=L("span"),V=ae(E),u=P(),m=L("span"),m.textContent=I,C=P(),A=L("div"),z=L("div"),v=L("div"),M=L("input"),D=P(),F=we("svg"),i=we("path"),this.h()},l(_){e=S(_,"DIV",{class:!0});var p=T(e);a=S(p,"SPAN",{class:!0});var G=T(a);s=le(G,t),G.forEach(h),n=H(p),l=S(p,"SPAN",{class:!0,"data-svelte-h":!0}),fe(l)!=="svelte-1yocus0"&&(l.textContent=c),p.forEach(h),o=H(_),f=S(_,"DIV",{class:!0});var Q=T(f);$=S(Q,"SPAN",{class:!0});var Y=T($);V=le(Y,E),Y.forEach(h),u=H(Q),m=S(Q,"SPAN",{class:!0,"data-svelte-h":!0}),fe(m)!=="svelte-1gs9vfx"&&(m.textContent=I),Q.forEach(h),C=H(_),A=S(_,"DIV",{class:!0});var ge=T(A);z=S(ge,"DIV",{class:!0});var ve=T(z);v=S(ve,"DIV",{class:!0});var ie=T(v);M=S(ie,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),D=H(ie),F=ke(ie,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,class:!0});var be=T(F);i=ke(be,"path",{d:!0,fill:!0}),T(i).forEach(h),be.forEach(h),ie.forEach(h),ve.forEach(h),ge.forEach(h),this.h()},h(){b(a,"class","text-3xl"),b(l,"class","ml-2 text-xl"),b(e,"class","h-20 my-5 mr-10 p-5 border-2 rounded-lg border-secondary"),b($,"class","text-3xl"),b(m,"class","ml-2 text-xl"),b(f,"class","h-20 my-5 mr-10 p-5 border-2 rounded-lg border-secondary"),b(M,"id","search-input"),b(M,"type","text"),b(M,"placeholder","Search datasets"),b(M,"class","h-10 pl-10 pr-4 rounded-full border-2 accent-main border-main text-slate-800 placeholder-slate-500 font-medium"),b(i,"d",Oe),b(i,"fill","currentcolor"),b(F,"xmlns","http://www.w3.org/2000/svg"),b(F,"height","48"),b(F,"viewBox","0 -960 960 960"),b(F,"width","48"),b(F,"class","absolute left-3 h-5 w-5 pointer-events-none text-slate-800"),b(v,"class","h-20 relative flex items-center"),b(z,"class","flex items-center space-x-2"),b(A,"class","grow flex flex-row justify-end items-end")},m(_,p){R(_,e,p),w(e,a),w(a,s),w(e,n),w(e,l),R(_,o,p),R(_,f,p),w(f,$),w($,V),w(f,u),w(f,m),R(_,C,p),R(_,A,p),w(A,z),w(z,v),w(v,M),w(v,D),w(v,F),w(F,i),d||(N=he(M,"input",r[1]),d=!0)},p(_,p){p&1&&t!==(t=_[0]?.length+"")&&ue(s,t),p&1&&E!==(E=_[0].reduce(Ce,0)+"")&&ue(V,E)},d(_){_&&(h(e),h(o),h(f),h(C),h(A)),d=!1,N()}}}function bt(r){let e,a,t=`<img src="${vt}" alt="Logo Pixano" class="w-10 h-10"/> <span class="text-3xl font-bold text-slate-50 uppercase">Pixano</span>`,s,n,l=r[0]&&De(r);return{c(){e=L("header"),a=L("div"),a.innerHTML=t,s=P(),n=L("div"),l&&l.c(),this.h()},l(c){e=S(c,"HEADER",{class:!0});var o=T(e);a=S(o,"DIV",{class:!0,"data-svelte-h":!0}),fe(a)!=="svelte-ugnup7"&&(a.innerHTML=t),s=H(o),n=S(o,"DIV",{class:!0});var f=T(n);l&&l.l(f),f.forEach(h),o.forEach(h),this.h()},h(){b(a,"class","flex gap-2"),b(n,"class","flex py-5 h-40 w-full items-center flex-wrap text-slate-50"),b(e,"class","p-4 w-full h-fit pt-10 px-20 xl:px-60 flex flex-col justify-evenly bg-primary z-10")},m(c,o){R(c,e,o),w(e,a),w(e,s),w(e,n),l&&l.m(n,null)},p(c,[o]){c[0]?l?l.p(c,o):(l=De(c),l.c(),l.m(n,null)):l&&(l.d(1),l=null)},i:se,o:se,d(c){c&&h(e),l&&l.d()}}}const Ce=(r,e)=>r+e.num_elements;function wt(r,e,a){let{datasets:t}=e;const s=n=>{const l=n.currentTarget;de.update((c=[])=>c.map(o=>({...o,isFiltered:!o.name.toLocaleLowerCase().includes(l.value.toLocaleLowerCase())})))};return r.$$set=n=>{"datasets"in n&&a(0,t=n.datasets)},[t,s]}class kt extends q{constructor(e){super(),J(this,e,wt,bt,W,{datasets:0})}}const It=""+new URL("../assets/pixano.DQCP_KhV.png",import.meta.url).href,Nt=(r,e,a)=>{const t=e.findIndex(n=>n.id===a);let s;if(t!==-1){const n=r==="previous"?t-1:t+1;n===-1&&(s=e[e.length-1].id),n===e.length&&(s=e[0].id),n>=0&&n<e.length&&(s=e[n].id)}return s},Le=[{name:"Dashboard",Icon:gt},{name:"Dataset",Icon:dt}];function Se(r,e,a){const t=r.slice();return t[20]=e[a].name,t[21]=e[a].Icon,t}function Dt(r){let e,a;return e=new et({}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){B(e,t,s),a=!0},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function Ee(r){let e,a,t,s;const n=[Lt,Ct],l=[];function c(o,f){return o[3]?0:1}return e=c(r),a=l[e]=n[e](r),{c(){a.c(),t=me()},l(o){a.l(o),t=me()},m(o,f){l[e].m(o,f),R(o,t,f),s=!0},p(o,f){let $=e;e=c(o),e===$?l[e].p(o,f):(te(),k(l[$],1,1,()=>{l[$]=null}),ne(),a=l[e],a?a.p(o,f):(a=l[e]=n[e](o),a.c()),g(a,1),a.m(t.parentNode,t))},i(o){s||(g(a),s=!0)},o(o){k(a),s=!1},d(o){o&&h(t),l[e].d(o)}}}function Ct(r){let e,a,t,s,n,l,c;return a=new $e({props:{tooltipContent:"Previous item",$$slots:{default:[St]},$$scope:{ctx:r}}}),a.$on("click",r[13]),l=new $e({props:{tooltipContent:"Next item",$$slots:{default:[Et]},$$scope:{ctx:r}}}),l.$on("click",r[14]),{c(){e=L("div"),j(a.$$.fragment),t=P(),s=ae(r[2]),n=P(),j(l.$$.fragment),this.h()},l(o){e=S(o,"DIV",{class:!0});var f=T(e);y(a.$$.fragment,f),t=H(f),s=le(f,r[2]),n=H(f),y(l.$$.fragment,f),f.forEach(h),this.h()},h(){b(e,"class","flex items-center gap-4")},m(o,f){R(o,e,f),B(a,e,null),w(e,t),w(e,s),w(e,n),B(l,e,null),c=!0},p(o,f){const $={};f&16777216&&($.$$scope={dirty:f,ctx:o}),a.$set($),(!c||f&4)&&ue(s,o[2]);const E={};f&16777216&&(E.$$scope={dirty:f,ctx:o}),l.$set(E)},i(o){c||(g(a.$$.fragment,o),g(l.$$.fragment,o),c=!0)},o(o){k(a.$$.fragment,o),k(l.$$.fragment,o),c=!1},d(o){o&&h(e),U(a),U(l)}}}function Lt(r){let e,a;return e=new Je({props:{class:"animate-spin"}}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){B(e,t,s),a=!0},p:se,i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function St(r){let e,a;return e=new at({}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){B(e,t,s),a=!0},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function Et(r){let e,a;return e=new ct({}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){B(e,t,s),a=!0},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function Mt(r){let e,a,t,s,n;return e=new r[21]({props:{strokeWidth:1}}),{c(){j(e.$$.fragment),a=P(),t=ae(r[20]),s=P()},l(l){y(e.$$.fragment,l),a=H(l),t=le(l,r[20]),s=H(l)},m(l,c){B(e,l,c),R(l,a,c),R(l,t,c),R(l,s,c),n=!0},p:se,i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){l&&(h(a),h(t),h(s)),U(e,l)}}}function Me(r){let e,a;function t(){return r[15](r[20])}return e=new qe({props:{isSelected:r[1]?.includes(`/${r[20]}`.toLowerCase()),$$slots:{default:[Mt]},$$scope:{ctx:r}}}),e.$on("click",t),{c(){j(e.$$.fragment)},l(s){y(e.$$.fragment,s)},m(s,n){B(e,s,n),a=!0},p(s,n){r=s;const l={};n&2&&(l.isSelected=r[1]?.includes(`/${r[20]}`.toLowerCase())),n&16777216&&(l.$$scope={dirty:n,ctx:r}),e.$set(l)},i(s){a||(g(e.$$.fragment,s),a=!0)},o(s){k(e.$$.fragment,s),a=!1},d(s){U(e,s)}}}function Ve(r){let e,a;return e=new We({props:{message:"You have unsaved changes",confirm:"Save and continue",alternativeAction:"Continue without saving"}}),e.$on("confirm",r[7]),e.$on("alternative",r[8]),e.$on("cancel",r[16]),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){B(e,t,s),a=!0},p:se,i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function Vt(r){let e,a,t,s,n,l=`<img src="${It}" alt="Logo Pixano" class="w-8 h-8 mx-2"/>`,c,o,f,$,E,V,u,m,I,C,A,z;o=new $e({props:{tooltipContent:r[2]?"Back to dataset":"Back to home",$$slots:{default:[Dt]},$$scope:{ctx:r}}}),o.$on("click",r[12]);let v=r[2]&&Ee(r),M=Ie(Le),D=[];for(let d=0;d<M.length;d+=1)D[d]=Me(Se(r,M,d));const F=d=>k(D[d],1,1,()=>{D[d]=null});let i=r[4]!=="none"&&Ve(r);return{c(){e=L("header"),a=L("div"),t=L("div"),s=L("div"),n=L("button"),n.innerHTML=l,c=P(),j(o.$$.fragment),f=P(),$=ae(r[0]),E=P(),v&&v.c(),V=P(),u=L("div");for(let d=0;d<D.length;d+=1)D[d].c();m=P(),i&&i.c(),I=me(),this.h()},l(d){e=S(d,"HEADER",{class:!0});var N=T(e);a=S(N,"DIV",{class:!0});var _=T(a);t=S(_,"DIV",{class:!0});var p=T(t);s=S(p,"DIV",{class:!0});var G=T(s);n=S(G,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(n)!=="svelte-1neur1j"&&(n.innerHTML=l),c=H(G),y(o.$$.fragment,G),f=H(G),$=le(G,r[0]),G.forEach(h),p.forEach(h),E=H(_),v&&v.l(_),V=H(_),u=S(_,"DIV",{class:!0});var Q=T(u);for(let Y=0;Y<D.length;Y+=1)D[Y].l(Q);Q.forEach(h),_.forEach(h),N.forEach(h),m=H(d),i&&i.l(d),I=me(),this.h()},h(){b(n,"class","h-10 w-10"),b(s,"class","flex gap-4 items-center font-light"),b(t,"class","h-10 flex items-center font-semibold text-2xl"),b(u,"class","flex gap-4"),b(a,"class","h-20 p-5 flex justify-between items-center shrink-0 bg-white border-b border-slate-200 shadow-sm text-slate-800"),b(e,"class","w-full fixed z-40")},m(d,N){R(d,e,N),w(e,a),w(a,t),w(t,s),w(s,n),w(s,c),B(o,s,null),w(s,f),w(s,$),w(a,E),v&&v.m(a,null),w(a,V),w(a,u);for(let _=0;_<D.length;_+=1)D[_]&&D[_].m(u,null);R(d,m,N),i&&i.m(d,N),R(d,I,N),C=!0,A||(z=[he(window,"keyup",r[6]),he(n,"click",r[11])],A=!0)},p(d,[N]){const _={};if(N&4&&(_.tooltipContent=d[2]?"Back to dataset":"Back to home"),N&16777216&&(_.$$scope={dirty:N,ctx:d}),o.$set(_),(!C||N&1)&&ue($,d[0]),d[2]?v?(v.p(d,N),N&4&&g(v,1)):(v=Ee(d),v.c(),g(v,1),v.m(a,V)):v&&(te(),k(v,1,1,()=>{v=null}),ne()),N&515){M=Ie(Le);let p;for(p=0;p<M.length;p+=1){const G=Se(d,M,p);D[p]?(D[p].p(G,N),g(D[p],1)):(D[p]=Me(G),D[p].c(),g(D[p],1),D[p].m(u,null))}for(te(),p=M.length;p<D.length;p+=1)F(p);ne()}d[4]!=="none"?i?(i.p(d,N),N&16&&g(i,1)):(i=Ve(d),i.c(),g(i,1),i.m(I.parentNode,I)):i&&(te(),k(i,1,1,()=>{i=null}),ne())},i(d){if(!C){g(o.$$.fragment,d),g(v);for(let N=0;N<M.length;N+=1)g(D[N]);g(i),C=!0}},o(d){k(o.$$.fragment,d),k(v),D=D.filter(Boolean);for(let N=0;N<D.length;N+=1)k(D[N]);k(i),C=!1},d(d){d&&(h(e),h(m),h(I)),U(o),v&&v.d(),Te(D,d),i&&i.d(d),A=!1,Pe(z)}}}function At(r,e,a){let{datasetName:t}=e,{pageId:s}=e,{currentDatasetName:n}=e,l,c,o,f,$="none",E="none";_e.subscribe(i=>f=i.canSave),Fe.subscribe(i=>{a(3,o=i)}),de.subscribe(i=>{l=i});const V=async i=>{const d=l.find(p=>p.name===n),N=Object.values(d?.page?.items||{}),_=Nt(i,N,c);if(_){const p=`/${n}/dataset/${_}`;if(f)return E=_,a(4,$=p);a(2,c=_),await pe(p)}},u=async i=>i.target?.tagName==="INPUT"?i.preventDefault():(i.key==="ArrowLeft"?await V("previous"):i.key==="ArrowRight"&&await V("next"),i.key),m=async()=>{_e.update(i=>({...i,shouldSave:!0})),await I()},I=async()=>{E!=="none"&&(a(2,c=E),E="none"),await pe($),a(4,$="none"),_e.set({canSave:!1,shouldSave:!1})},C=async i=>{if(f)return a(4,$=i);await pe(i)},A=()=>C("/"),z=()=>C(c?`/${t}/dataset`:"/"),v=()=>V("previous"),M=()=>V("next"),D=i=>C(`/${t}/${i.toLocaleLowerCase()}`),F=()=>a(4,$="none");return r.$$set=i=>{"datasetName"in i&&a(0,t=i.datasetName),"pageId"in i&&a(1,s=i.pageId),"currentDatasetName"in i&&a(10,n=i.currentDatasetName)},Ae.subscribe(i=>{a(2,c=i.params.itemId)}),[t,s,c,o,$,V,u,m,I,C,n,A,z,v,M,D,F]}class Tt extends q{constructor(e){super(),J(this,e,At,Vt,W,{datasetName:0,pageId:1,currentDatasetName:10})}}const Pt=""+new URL("../assets/favicon.DroiEs1d.ico",import.meta.url).href;function Ht(r){let e,a;return e=new Tt({props:{datasetName:r[1],pageId:r[2],currentDatasetName:r[1]}}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){B(e,t,s),a=!0},p(t,s){const n={};s&2&&(n.datasetName=t[1]),s&4&&(n.pageId=t[2]),s&2&&(n.currentDatasetName=t[1]),e.$set(n)},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function jt(r){let e,a;return e=new kt({props:{datasets:r[0]}}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){B(e,t,s),a=!0},p(t,s){const n={};s&1&&(n.datasets=t[0]),e.$set(n)},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function yt(r){let e,a,t,s,n,l,c,o;const f=[jt,Ht],$=[];function E(m,I){return m[2]==="/"?0:1}s=E(r),n=$[s]=f[s](r);const V=r[4].default,u=X(V,r,r[3],null);return{c(){e=L("link"),a=P(),t=L("div"),n.c(),l=P(),c=L("main"),u&&u.c(),this.h()},l(m){const I=He("svelte-1lrorme",document.head);e=S(I,"LINK",{rel:!0,type:!0,href:!0}),I.forEach(h),a=H(m),t=S(m,"DIV",{class:!0});var C=T(t);n.l(C),l=H(C),c=S(C,"MAIN",{class:!0});var A=T(c);u&&u.l(A),A.forEach(h),C.forEach(h),this.h()},h(){b(e,"rel","icon"),b(e,"type","image/svg"),b(e,"href",Pt),b(c,"class","h-1 min-h-screen"),b(t,"class","app")},m(m,I){w(document.head,e),R(m,a,I),R(m,t,I),$[s].m(t,null),w(t,l),w(t,c),u&&u.m(c,null),o=!0},p(m,[I]){let C=s;s=E(m),s===C?$[s].p(m,I):(te(),k($[C],1,1,()=>{$[C]=null}),ne(),n=$[s],n?n.p(m,I):(n=$[s]=f[s](m),n.c()),g(n,1),n.m(t,l)),u&&u.p&&(!o||I&8)&&Z(u,V,m,m[3],o?ee(V,m[3],I,null):x(m[3]),null)},i(m){o||(g(n),g(u,m),o=!0)},o(m){k(n),k(u,m),o=!1},d(m){m&&(h(a),h(t)),h(e),$[s].d(),u&&u.d(m)}}}function Bt(r,e,a){let{$$slots:t={},$$scope:s}=e,n,l,c,o,f;async function $(){c=await ye(),Ge.set(c)}async function E(){try{const u=await Be();a(0,n=u),de.set(u)}catch(u){console.error(u)}}je(async()=>{await E(),await $()});const V=async(u,m,I,C)=>{let A={items:[],total:0},z=!1;if(C?.search)try{A=await Ue(u,C,m,I)}catch{z=!0}else try{A=await Re(u,m,I),l=await ze(u)}catch{z=!0}de.update((v=[])=>v.map(M=>M.id===u?{...M,features_values:l.features_values,page:A,isErrored:z}:M))};return Ne.subscribe(u=>{const m=n?.find(I=>I.name===f)?.id;m&&u&&V(m,u.currentPage,u.pageSize,u.query).catch(I=>console.error(I))}),r.$$set=u=>{"$$scope"in u&&a(3,s=u.$$scope)},r.$$.update=()=>{r.$$.dirty&3&&n?.find(m=>m.name===f)?.id&&Ne.set(Ke)},Ae.subscribe(u=>{a(2,o=u.route.id),a(1,f=u.params.dataset)}),[n,f,o,s,t]}class Xt extends q{constructor(e){super(),J(this,e,Bt,yt,W,{})}}export{Xt as component,Yt as universal};
