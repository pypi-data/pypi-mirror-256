import{b2 as b,d as v,M as g,b as k,B as x,aj as B,e as N,j as e,c as S,h as m,a as D,i as F,a1 as I,o as T,l as p,b3 as J,b4 as M,b5 as O,ae as d,b6 as j,b0 as i}from"./index-rFoAAG6Q.js";import{u as P}from"./usePageTitle-gEkjj9Nr.js";class U extends b{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const Q=v({__name:"FlowRunCreate",setup(f){const t=g(),n=k("deploymentId"),s=I(),y=x("parameters",U,void 0),{deployment:o}=B(n),_=async r=>{var l,a;try{const c=await t.deployments.createDeploymentFlowRun(n.value,r),u=((a=(l=r.state)==null?void 0:l.stateDetails)==null?void 0:a.scheduledTime)??void 0,h=!u,C=j(O,{flowRun:c,flowRunRoute:d.flowRun,router:s,immediate:h,startTime:u});i(C,"success"),s.push(d.deployment(n.value))}catch(c){i("Something went wrong trying to create a flow run","error"),console.error(c)}},w=()=>{s.back()},R=N(()=>o.value?`Create Flow Run for Deployment: ${o.value.name}`:"Create Flow Run for Deployment");return P(R),(r,l)=>{const a=F("p-layout-default");return e(o)?(T(),S(a,{key:0},{header:m(()=>[p(e(J),{deployment:e(o)},null,8,["deployment"])]),default:m(()=>[p(e(M),{deployment:e(o),parameters:e(y),onSubmit:_,onCancel:w},null,8,["deployment","parameters"])]),_:1})):D("",!0)}}});export{Q as default};
