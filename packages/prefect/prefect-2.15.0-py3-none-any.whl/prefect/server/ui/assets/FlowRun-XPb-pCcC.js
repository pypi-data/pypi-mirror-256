import{d as y,f as m,e as o,o as u,k as V,K as R,l as d,j as a,af as A,ag as D,ah as L,b as O,M as $,ai as q,aj as z,ak as G,B as J,al as K,am as W,an as Y,ao as H,ap as Q,c as r,h as n,i as _,a1 as X,aq as Z,a as f,ar as ee,as as ae,at as le,au as se,av as te,aw as ne,ax as oe,v as ue,ae as h,ay as re}from"./index-rFoAAG6Q.js";import{u as fe}from"./usePageTitle-gEkjj9Nr.js";const ce={class:"flow-run-graphs__graphs"},pe={class:"flow-run-graphs__panel p-background"},de=y({__name:"FlowRunGraphs",props:{flowRun:{}},setup(k){const p=m(),c=m(!1),e=m(null),i=o(()=>({root:{"flow-run-graphs--fullscreen":c.value,"flow-run-graphs--show-panel":!!e.value}}));return(v,t)=>(u(),V("div",{class:L(["flow-run-graphs",i.value.root])},[R("div",ce,[d(a(A),{fullscreen:c.value,"onUpdate:fullscreen":t[0]||(t[0]=s=>c.value=s),viewport:p.value,"onUpdate:viewport":t[1]||(t[1]=s=>p.value=s),selected:e.value,"onUpdate:selected":t[2]||(t[2]=s=>e.value=s),"flow-run":v.flowRun,class:"flow-run-graphs__flow-run"},null,8,["fullscreen","viewport","selected","flow-run"])]),R("div",pe,[d(a(D),{node:e.value,"onUpdate:node":t[3]||(t[3]=s=>e.value=s),floating:c.value},null,8,["node","floating"])])],2))}}),ve=y({__name:"FlowRun",setup(k){const p=X(),c=O("flowRunId");$();const{flowRun:e,subscription:i}=q(c,{interval:5e3}),v=o(()=>{var l;return(l=e.value)==null?void 0:l.deploymentId}),{deployment:t}=z(v),s=o(()=>{var l;return(l=e.value)!=null&&l.stateType?G(e.value.stateType):!0}),T=o(()=>[{label:"Logs"},{label:"Task Runs",hidden:s.value},{label:"Subflow Runs",hidden:s.value},{label:"Results",hidden:s.value},{label:"Artifacts",hidden:s.value},{label:"Details"},{label:"Parameters"}]),w=J("tab","Logs"),{tabs:x}=K(T,w),F=o(()=>{var l;return((l=e.value)==null?void 0:l.parameters)??{}}),B=o(()=>{var l;return((l=t.value)==null?void 0:l.parameterOpenApiSchema)??{}}),g=o(()=>W(F.value,B.value)),I=o(()=>[c.value]),{filter:U}=Y({flowRuns:{parentFlowRunId:I}});function C(){p.push(h.flowRuns())}const P=o(()=>{var l;return(l=e.value)==null?void 0:l.stateType});H(P);const E=o(()=>e.value?`Flow Run: ${e.value.name}`:"Flow Run");return fe(E),Q(()=>{i.error&&re(i.error).isInRange("clientError")&&p.replace(h[404]())}),(l,b)=>{const N=_("p-code-highlight"),S=_("p-tabs"),j=_("p-layout-default");return u(),r(j,{class:"flow-run"},{header:n(()=>[a(e)?(u(),r(a(Z),{key:0,"flow-run-id":a(e).id,onDelete:C},null,8,["flow-run-id"])):f("",!0)]),default:n(()=>[a(e)&&!s.value?(u(),r(de,{key:0,"flow-run":a(e)},null,8,["flow-run"])):f("",!0),d(S,{selected:a(w),"onUpdate:selected":b[0]||(b[0]=M=>ue(w)?w.value=M:null),tabs:a(x)},{details:n(()=>[a(e)?(u(),r(a(ee),{key:0,"flow-run":a(e)},null,8,["flow-run"])):f("",!0)]),logs:n(()=>[a(e)?(u(),r(a(ae),{key:0,"flow-run":a(e)},null,8,["flow-run"])):f("",!0)]),results:n(()=>[a(e)?(u(),r(a(le),{key:0,"flow-run":a(e)},null,8,["flow-run"])):f("",!0)]),artifacts:n(()=>[a(e)?(u(),r(a(se),{key:0,"flow-run":a(e)},null,8,["flow-run"])):f("",!0)]),"task-runs":n(()=>[a(e)?(u(),r(a(te),{key:0,"flow-run-id":a(e).id},null,8,["flow-run-id"])):f("",!0)]),"subflow-runs":n(()=>[d(a(ne),{filter:a(U)},null,8,["filter"])]),parameters:n(()=>[a(e)?(u(),r(a(oe),{key:0,"text-to-copy":g.value},{default:n(()=>[d(N,{lang:"json",text:g.value,class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):f("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{ve as default};
