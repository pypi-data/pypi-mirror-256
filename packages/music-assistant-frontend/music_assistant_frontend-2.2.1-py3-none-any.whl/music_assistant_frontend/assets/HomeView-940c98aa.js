import{v as M,c as N,L as c,J as f,y as i,z as h,A as r,l as p,B as _,D as S,x as m,K as k,E as o,R as C,N as u,I as D,M as P,ab as F,a2 as O,_ as W,g as Y,r as H,o as K,ak as U,b as j,F as g,G as V,W as T}from"./index-d3f7228a.js";import{_ as J}from"./PanelviewItem.vue_vue_type_style_index_0_lang-91a0300e.js";import{i as X,e as Z}from"./contextmenu-1e6c2661.js";import{_ as R,i as w,V as x}from"./VBadge-21d0581f.js";import{L as ee}from"./ListItem-e5d1b49e.js";import{j as te,k as $,x as ae,y as se,V as le}from"./forwardRefs-67fbfe57.js";import{V as ie}from"./VCard-a9fb81d4.js";import{V as z}from"./VToolbar-670cd48d.js";import{V as re,a as Q}from"./VSlideGroup-06456ab6.js";import"./VMenu-985ba83d.js";import"./VTooltip-66b7aa34.js";import"./VCheckboxBtn-edf7fc8d.js";import"./VCardText-c2387e01.js";const oe={style:{cursor:"pointer"}},ne={key:0},ue={key:0},me={key:1},ce={key:2},de={style:{cursor:"pointer"},class:"line-clamp-1"},pe={key:0},ye={key:1},_e={key:2,class:"line-clamp-1"},ve={key:3,class:"line-clamp-1"},he={key:4,class:"line-clamp-1"},fe={key:5,class:"line-clamp-1"},be={style:{cursor:"pointer"}},ke={style:{cursor:"pointer",fontWeight:"bold"}},Ce=M({__name:"PanelviewPlayerCard",props:{player:{default:void 0},playerQueue:{default:void 0}},setup(b){var l;const y=b,t=N(()=>{if(y.player&&(l=c.queues[y.player.active_source]),l)return l.current_item}),v=N(()=>{if(f.selectedPlayer)return f.selectedPlayer});return(a,s)=>(i(),h(ie,{class:W(["panel-item",{"panel-item-selected":v.value&&a.player&&v.value.player_id==a.player.player_id}])},{default:r(()=>[p(ee,{class:"panel-item-details"},{prepend:r(()=>{var e;return[_("div",{class:"media-thumb player-media-thumb",style:S(`height: ${m(k)({breakpoint:"phone"})?50:64}px; width: ${m(k)({breakpoint:"phone"})?50:64}px; `)},[p(R,{item:((e=t.value)==null?void 0:e.media_item)||t.value,fallback:m(w),style:{cursor:"pointer"}},null,8,["item","fallback"])],4)]}),title:r(()=>[_("div",oe,[t.value&&t.value.media_item?(i(),o("div",ne,[C(u(t.value.media_item.name)+" ",1),"version"in t.value.media_item&&t.value.media_item.version?(i(),o("span",ue,"("+u(t.value.media_item.version)+")",1)):D("",!0)])):t.value?(i(),o("div",me,u(t.value.name),1)):(i(),o("div",ce,u(a.playerQueue&&a.playerQueue.display_name),1))])]),subtitle:r(()=>{var e,n,d,L,A,q,E,B,G;return[_("div",de,[t.value&&((e=t.value.media_item)==null?void 0:e.media_type)==m(P).TRACK&&"album"in t.value.media_item&&t.value.media_item.album?(i(),o("div",pe,u(m(F)(t.value.media_item.artists))+" â€¢ "+u(t.value.media_item.album.name),1)):t.value&&t.value.media_item&&"artists"in t.value.media_item&&t.value.media_item.artists.length>0?(i(),o("div",ye,u(t.value.media_item.artists[0].name),1)):(d=(n=t.value)==null?void 0:n.streamdetails)!=null&&d.stream_title?(i(),o("div",_e,u((A=(L=t.value)==null?void 0:L.streamdetails)==null?void 0:A.stream_title),1)):t.value&&((q=t.value.media_item)!=null&&q.metadata.description)?(i(),o("div",ve,u(t.value.media_item.metadata.description),1)):a.playerQueue&&a.playerQueue.items==0?(i(),o("div",he,u(a.$t("queue_empty")),1)):((E=m(f).selectedPlayer)==null?void 0:E.active_source)!=((B=m(f).selectedPlayer)==null?void 0:B.player_id)?(i(),o("div",fe,u(a.$t("external_source_active",[(G=m(f).selectedPlayer)==null?void 0:G.active_source])),1)):D("",!0)])]}),default:r(()=>[_("div",be,[_("div",null,[C(" on "),_("span",ke,u(a.player&&a.player.display_name),1)])])]),append:r(()=>[p(te,{icon:"",variant:"text",onClick:s[0]||(s[0]=e=>m(c).queueCommandPlayPause(m(l).queue_id))},{default:r(()=>[m(l).state==m(O).PLAYING?(i(),h($,{key:0,size:m(k)({breakpoint:"phone"})?"24":"32"},{default:r(()=>[C("mdi-pause-circle-outline")]),_:1},8,["size"])):(i(),h($,{key:1,size:m(k)({breakpoint:"phone"})?"24":"32"},{default:r(()=>[C("mdi-play-circle-outline")]),_:1},8,["size"]))]),_:1})]),_:1})]),_:1},8,["class"]))}});const I=Y()({name:"VSlideGroupItem",props:ae(),emits:{"group:selected":b=>!0},setup(b,l){let{slots:y}=l;const t=se(b,re);return()=>{var v;return(v=y.default)==null?void 0:v.call(y,{isSelected:t.isSelected.value,select:t.select,toggle:t.toggle,selectedClass:t.selectedClass.value})}}}),Pe={key:0,class:"widget-row"},$e={class:"mr-3"},ge={key:1,class:"mr-3"},Ve={key:1,class:"widget-row"},Se={class:"mr-3"},De={key:1,class:"mr-3"},Fe=M({__name:"HomeView",setup(b){const l=H({queue:{label:"currently_playing",icon:"mdi-playlist-play",items:[]},recently_played:{label:"recently_played",icon:"mdi-motion-play",items:[]},artists:{label:"artists",icon:"mdi-account-music",path:"/artists",items:[]},albums:{label:"albums",icon:"mdi-album",path:"/albums",items:[]},playlists:{label:"playlists",icon:"mdi-playlist-music",path:"/playlists",items:[]},tracks:{label:"tracks",icon:"mdi-file-music",path:"/tracks",items:[]},radios:{label:"radios",icon:"mdi-radio",path:"/radios",items:[]},browse:{label:"browse",icon:"mdi-folder",path:"/browse",items:[]}});K(async()=>{const a=c.subscribe(U.PLAYER_UPDATED,s=>{y()});j(a),y(),c.getRecentlyPlayedItems(20).then(s=>{l.value.recently_played.items=s}),c.getLibraryArtists(void 0,void 0,20,void 0,"RANDOM()").then(s=>{l.value.artists.items=s.items,l.value.artists.count=s.total}),c.getLibraryAlbums(void 0,void 0,20,void 0,"timestamp_added DESC").then(s=>{l.value.albums.items=s.items,l.value.albums.count=s.total}),c.getRecentlyPlayedItems(10,[P.PLAYLIST]).then(s=>{l.value.playlists.items=s,c.getLibraryPlaylists(void 0,void 0,20,void 0,"timestamp_added DESC").then(e=>{l.value.playlists.count=e.total;const n=s.map(function(d){return d.name});for(const d of e.items)n.includes(d.name)||l.value.playlists.items.push(d)})}),c.getRecentlyPlayedItems(10,[P.RADIO]).then(s=>{l.value.radios.items=s,c.getLibraryRadios(void 0,void 0,20,void 0,"timestamp_added DESC").then(e=>{l.value.radios.count=e.total;const n=s.map(function(d){return d.name});for(const d of e.items)n.includes(d.name)||l.value.radios.items.push(d)})}),c.getLibraryTracks(void 0,void 0,20,void 0,"timestamp_added DESC").then(s=>{l.value.tracks.items=s.items,l.value.tracks.count=s.total}),await c.browse("",s=>{l.value.browse.items.push(...s)})});const y=function(){c.getPlayers().then(a=>{for(var s of a){var e=c.queues[s.player_id];e&&e.items>0&&(l.value.queue.players||(l.value.queue.players=[]),l.value.queue.players.some(n=>n.player_id===s.player_id)||l.value.queue.players.push(s))}})},t=function(a){X(a)&&["artist","album","playlist"].includes(a.media_type)?T.push({name:a.media_type,params:{itemId:a.item_id,provider:a.provider}}):a.media_type===P.FOLDER?T.push({name:"browse",query:{path:a.path}}):Z.emit("playdialog",{items:[a],showContextMenuItems:!0})},v=function(a){const s=a;s&&(f.selectedPlayer=s,console.log("Selected new default player: ",s.display_name))};return(a,s)=>(i(),o("div",null,[(i(!0),o(g,null,V(l.value,e=>(i(),o("div",{key:e.label},[p(le),e.items.length?(i(),o("div",Pe,[p(z,{color:"transparent",style:S(e.path?"cursor: pointer":""),onClick:n=>e.path?a.$router.replace(e.path):""},{prepend:r(()=>[p($,{icon:e.icon,style:{"margin-left":"15px"}},null,8,["icon"])]),title:r(()=>[e.count?(i(),h(x,{key:0,inline:"",color:"grey",content:e.count},{default:r(()=>[_("span",$e,u(a.$t(e.label)),1)]),_:2},1032,["content"])):(i(),o("span",ge,u(a.$t(e.label)),1))]),_:2},1032,["style","onClick"]),p(Q,{"show-arrows":""},{default:r(()=>[(i(!0),o(g,null,V(e.items,n=>(i(),h(I,{key:n.uri},{default:r(()=>[p(J,{item:n,"show-checkboxes":!1,"show-track-number":!1,"is-selected":!1,style:{height:"160px",width:"120px",margin:"5px"},onClick:t},null,8,["item"])]),_:2},1024))),128))]),_:2},1024)])):e.players&&e.players.length?(i(),o("div",Ve,[p(z,{color:"transparent",style:S(e.path?"cursor: pointer":""),onClick:n=>e.path?a.$router.replace(e.path):""},{prepend:r(()=>[p($,{icon:e.icon,style:{"margin-left":"15px"}},null,8,["icon"])]),title:r(()=>[e.count?(i(),h(x,{key:0,inline:"",color:"grey",content:e.count},{default:r(()=>[_("span",Se,u(a.$t(e.label)),1)]),_:2},1032,["content"])):(i(),o("span",De,u(a.$t(e.label)),1))]),_:2},1032,["style","onClick"]),p(Q,{"show-arrows":""},{default:r(()=>[(i(!0),o(g,null,V(e.players,n=>(i(),h(I,{key:n.player_id},{default:r(()=>[p(Ce,{player:n,style:{height:"auto",width:"auto","max-width":"400px",margin:"5px"},onClick:d=>v(n)},null,8,["player","onClick"])]),_:2},1024))),128))]),_:2},1024)])):D("",!0)]))),128))]))}});export{Fe as default};
