import{_ as oe,a as ae}from"./delete-button.ZGyNNsFN.js";import{u as M,g as le,r as $,c as B,a as G,h as ne,s as se,_ as ie}from"./artifact-validation.qoc-3Eqa.js";import{z as de,r as S,$ as b,A as re,n as D,o as p,B as N,w as s,C as ue,b as n,E as r,H as ce,d as a,G as me,a as e,c as h,D as q,F as C,t as y}from"./entry.WMI-mudE.js";const pe=e("h1",{class:"section-header"},"MLTE REPORT",-1),_e=e("br",null,null,-1),he=e("h2",{class:"section-header"},"Model Summary",-1),fe=e("p",null,"A summary of the model under evaluation.",-1),ve=e("h2",{class:"section-header"},"Performance",-1),be=e("p",null,"Model performance evaluation.",-1),ye={class:"input-group"},Ve=e("h3",null,"Goals",-1),ge=e("p",null,"Goals or objectives that the model is going to help satisfy.",-1),Ue=e("h3",{class:"no-margin-section-header"},"Metrics",-1),ke={class:"inline-input-left"},qe=e("br",null,null,-1),Ce=e("br",null,null,-1),Ae={class:"inline-input-right"},De=e("br",null,null,-1),we=e("br",null,null,-1),xe=e("br",null,null,-1),Se={class:"inline-button"},Ee=e("hr",null,null,-1),Re=e("h3",null,"MLTE Evaluation",-1),Te={class:"table usa-table usa-table--borderless"},Pe=e("thead",null,[e("tr",null,[e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Status"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Property"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Measurement"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Evidence ID"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Message")])],-1),Fe={key:0,style:{"background-color":"rgba(210, 232, 221, 255)"}},Me={key:1,style:{"background-color":"rgba(255, 243, 205, 255)"}},$e={key:2,style:{"background-color":"rgba(248, 216, 219, 255)"}},Be={key:3},Ge=e("h2",{class:"section-header"},"Intended Use",-1),Ne=e("p",null,"A description of how the model is intended to be used.",-1),Oe={class:"input-group",style:{"margin-top":"1em"}},Le=e("h3",null,"Production Compute Resources",-1),je=e("p",null," Describe the hardware and software requirements including amount of compute resources needed for inference. ",-1),He={class:"inline-input-left"},Ie={class:"inline-input-right"},Je={class:"inline-input-left"},ze={class:"inline-input-right"},Qe=e("h2",{class:"section-header"},"Risks",-1),We=e("h2",{class:"section-header"},"Data",-1),Xe=e("p",null,"A description of the data used to train the model.",-1),Ke=e("h2",{class:"section-header"},"Data",-1),Ye=e("p",null," Details of the data that will influence development efforts; fill out all that are known. For access / availability, record what needs to happen to access the data, such as accounts that need to be created or methods for data transportation. ",-1),Ze={class:"input-group"},et={class:"inline-input-left"},tt={class:"inline-input-right"},ot={class:"input-group",style:{"margin-top":"1em"}},at={class:"inline-input-left"},lt={class:"inline-input-right"},nt={class:"inline-button"},st={class:"input-group",style:{"margin-top":"1em"}},it={class:"no-margin-section-header"},dt={class:"inline-input-left"},rt={class:"inline-input-right"},ut={class:"inline-input-left"},ct={class:"inline-input-right"},mt={class:"inline-input-left"},pt={class:"inline-input-right"},_t=e("hr",null,null,-1),ht=e("hr",null,null,-1),ft=e("h3",null,"Comments",-1),vt=e("p",null,"Free-form comments from model developers and system integrators.",-1),bt=e("h3",null,"Quantitative Analysis",-1),yt=e("p",null,"No quantitative analysis included with this report.",-1),Vt={style:{"text-align":"right","margin-top":"1em"}},Ct=de({__name:"report",async setup(gt){let T,P;const O=S([{href:"/",text:"Artifact Store"},{href:"/here",text:"Report"}]),w=S(""),F=S(b().query.artifactId!==void 0),o=S({summary:{problem_type:"classification",task:""},performance:{goals:[{description:"",metrics:[{description:"",baseline:""}]}],findings:null},intended_use:{context:"",production_requirements:{integration:"",interface:{input:{description:""},output:{description:""}},resources:{cpu:"",gpu:"",memory:"",storage:""}}},risks:{fp:"",fn:"",other:""},data:[{access:"",description:"",source:"",classification:"unclassified",labels:[{description:"",percentage:0}],fields:[{name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""}],rights:"",policies:"",identifiable_information:""}],comments:[{content:""}],quantitative_analysis:{},validated_spec_id:null}),E=[{value:"classification",text:"Classification"},{value:"clustering",text:"Clustering"},{value:"detection",text:"Detection"},{value:"trend",text:"Trend"},{value:"alert",text:"Alert"},{value:"forecasting",text:"Forecasting"},{value:"content_generation",text:"Content Generation"},{value:"benchmarking",text:"Benchmarking"},{value:"goals",text:"Goals"},{value:"other",text:"Other"}],R=[{value:"unclassified",text:"Unclassified"},{value:"cui",text:"Controlled Unclassified Information (CUI)"},{value:"pii",text:"Personally Identifiable Information (PII)"},{value:"phi",text:"Protected Health Information (PHI)"},{value:"other",text:"Other"}];if(b().query.artifactId!==void 0){const u=b().query.namespace,i=b().query.model,U=b().query.version,_=b().query.artifactId;[T,P]=re(async()=>M("http://localhost:8080/api/namespace/"+u+"/model/"+i+"/version/"+U+"/artifact/"+_,{retry:0,method:"GET",onRequestError(){$()},async onResponse({response:l}){var f,v;if(B(l._data)){o.value.summary=l._data.body.summary,o.value.performance.goals=l._data.body.performance.goals,o.value.intended_use.context=l._data.body.intended_use.usage_context,o.value.intended_use.production_requirements.integration=l._data.body.intended_use.production_requirements.integration,o.value.intended_use.production_requirements.interface=l._data.body.intended_use.production_requirements.interface,o.value.intended_use.production_requirements.resources=l._data.body.intended_use.production_requirements.resources,o.value.risks=l._data.body.risks,o.value.data=l._data.body.data,o.value.comments=l._data.body.comments;const g=l._data.body.summary.problem_type;if(((f=E.find(V=>V.value===g))==null?void 0:f.value)!==void 0&&(o.value.summary.problem_type=(v=E.find(V=>V.value===g))==null?void 0:v.value),l._data.data.forEach(V=>{var x,t;const A=V.classification;((x=R.find(m=>m.value===A))==null?void 0:x.value)!==void 0&&(V.classification=(t=R.find(m=>m.value===A))==null?void 0:t.value)}),l._data.body.validated_spec_id!==void 0&&l._data.body.validated_spec_id!==""){o.value.validated_spec_id=l._data.body.validated_spec_id;const V=await j(u,i,U,l._data.body.validated_spec_id);o.value.findings=H(V)}}},onResponseError(){G()}},"$mTrCeNnnXI")),await T,P()}async function L(){var f;const u=b().query.namespace,i=b().query.model,U=b().query.version;let _="";b().query.artifactId===void 0?_=w.value:_=(f=b().query.artifactId)==null?void 0:f.toString();const l={header:{identifier:_,type:"report",timestamp:Date.now()},body:{artifact_type:"report",summary:o.value.summary,performance:o.value.performance,intended_use:o.value.intended_use,risks:o.value.risks,data:o.value.data,comments:o.value.comments,analysis:o.value.quantitative_analysis,validated_spec_id:o.value.validated_spec_id}};if(B(l))try{await $fetch("http://localhost:8080/api/namespace/"+u+"/model/"+i+"/version/"+U+"/artifact",{retry:0,method:"POST",body:{artifact:l,force:F.value,parents:!1},onRequestError(){$()},onResponseError({response:v}){v.status===409?ne():G()}}),se("report",_),F.value=!0}catch(v){console.log("Error in fetch."),console.log(v)}else console.log("Invalid report.")}async function j(u,i,U,_){const{data:l,status:f}=await M("http://localhost:8080/api/namespace/"+u+"/model/"+i+"/version/"+U+"/artifact/"+_,{retry:0,method:"GET",onRequestError(){return null},onResponse({response:v}){return v._data},onResponseError(){return null}},"$ntiVmUWTvG");return f._value!=="success"?null:l._value}function H(u){const i=[];return JSON.parse(JSON.stringify(u)).body.properties.forEach(_=>{new Map(Object.entries(_.results)).forEach((f,v)=>{const g={status:f.type,property:_.name,measurement:f.metadata.measurement_type,evidence_id:f.metadata.identifier.name,message:f.message};i.push(g)})}),i}function I(){alert("Report export is not currently implemented.")}function J(){o.value.performance.goals.push({description:"",metrics:[{description:"",baseline:""}]})}function z(u){confirm("Are you sure you want to delete this goal?")&&o.value.performance.goals.splice(u,1)}function Q(u){o.value.performance.goals[u].metrics.push({description:"",baseline:""})}function W(u,i){confirm("Are you sure you want to delete this metric?")&&o.value.performance.goals[u].metrics.splice(i,1)}function X(){o.value.data.push({access:"",description:"",source:"",classification:"unclassified",labels:[{description:"",percentage:0}],fields:[{name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""}],rights:"",policies:"",identifiable_information:""})}function K(u){confirm("Are you sure you want to delete this data item?")&&o.value.data.splice(u,1)}function Y(u){o.value.data[u].labels.push({description:"",percentage:0})}function Z(u,i){confirm("Are you sure you want to delete this label?")&&o.value.data[u].labels.splice(i,1)}function ee(u){o.value.data[u].fields.push({name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""})}function te(u,i){confirm("Are you sure you want to delete this field?")&&o.value.data[u].fields.splice(i,1)}return(u,i)=>{const U=D("UsaBreadcrumb"),_=oe,l=D("UsaTextInput"),f=D("UsaSelect"),v=ae,g=ie,V=D("UsaTextarea"),A=D("UsaButton"),x=ue;return p(),N(x,{name:"base-layout"},{default:s(()=>[n(U,{items:r(O)},null,8,["items"]),pe,("useRoute"in u?u.useRoute:r(b))().query.artifactId===void 0?(p(),N(l,{key:0,modelValue:r(w),"onUpdate:modelValue":i[0]||(i[0]=t=>ce(w)?w.value=t:null)},{label:s(()=>[a(" Artifact ID "),n(_,null,{default:s(()=>[a(" The Artifact ID this negotiation card "),_e,a(" will be saved under upon submission. ")]),_:1})]),_:1},8,["modelValue"])):me("",!0),he,fe,n(f,{modelValue:r(o).summary.problem_type,"onUpdate:modelValue":i[1]||(i[1]=t=>r(o).summary.problem_type=t),options:E},{label:s(()=>[a(" Problem Type "),n(_,null,{default:s(()=>[a(" Type of ML problem the model is intended to solve ")]),_:1})]),_:1},8,["modelValue"]),n(l,{"model-value":r(o).summary.task},{label:s(()=>[a(" Task ")]),_:1},8,["model-value"]),ve,be,e("div",ye,[Ve,ge,(p(!0),h(C,null,q(r(o).performance.goals,(t,m)=>(p(),h("div",{key:m},[e("h3",null,"Goal "+y(m+1),1),n(l,{modelValue:t.description,"onUpdate:modelValue":d=>t.description=d},{label:s(()=>[a(" Goal Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),Ue,(p(!0),h(C,null,q(t.metrics,(d,k)=>(p(),h("div",{key:k},[e("div",ke,[n(l,{modelValue:d.description,"onUpdate:modelValue":c=>d.description=c},{label:s(()=>[a(" Description "),n(_,null,{default:s(()=>[a(" For each goal, select a performance metric that captures the system's "),qe,a(" ability to accomplish that goal; e.g., acceptance criteria for determining "),Ce,a(" that the model is performing correctly. ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",Ae,[n(l,{modelValue:d.baseline,"onUpdate:modelValue":c=>d.baseline=c},{label:s(()=>[a(" Baseline "),n(_,null,{default:s(()=>[a(" Select a baseline for each performance metric, which means a measurement that "),De,a(" evaluates whether or not the model will/can achieve the main goal for which it is being created. "),we,a(" If the goal cannot be measured directly, select a reasonable proxy and justify how that will "),xe,a(" reliably predict the modelâ€™s performance in achieving its goal. ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",Se,[n(v,{onClick:c=>W(m,k)},{default:s(()=>[a(" Delete Metric ")]),_:2},1032,["onClick"])])]))),128)),n(g,{class:"margin-button",onClick:d=>Q(m)},{default:s(()=>[a(" Add Metric ")]),_:2},1032,["onClick"]),n(v,{onClick:d=>z(m)},{default:s(()=>[a(" Delete goal ")]),_:2},1032,["onClick"]),Ee]))),128)),n(g,{class:"margin-button",onClick:i[2]||(i[2]=t=>J())},{default:s(()=>[a(" Add goal ")]),_:1})]),Re,e("table",Te,[Pe,e("tbody",null,[(p(!0),h(C,null,q(r(o).findings,t=>(p(),h("tr",{key:t.evidence_id},[t.status=="Success"?(p(),h("td",Fe,y(t.status),1)):t.status=="Ignore"?(p(),h("td",Me,y(t.status),1)):t.status=="Failure"?(p(),h("td",$e,y(t.status),1)):(p(),h("td",Be,y(t.status),1)),e("td",null,y(t.property),1),e("td",null,y(t.measurement),1),e("td",null,y(t.evidence_id),1),e("td",null,y(t.message),1)]))),128))])]),Ge,Ne,n(V,{"model-value":r(o).intended_use.context},null,8,["model-value"]),n(V,{modelValue:r(o).intended_use.production_requirements.integration,"onUpdate:modelValue":i[3]||(i[3]=t=>r(o).intended_use.production_requirements.integration=t)},{label:s(()=>[a(" A description of model integration practices. ")]),_:1},8,["modelValue"]),n(l,{modelValue:r(o).intended_use.production_requirements.interface.input.description,"onUpdate:modelValue":i[4]||(i[4]=t=>r(o).intended_use.production_requirements.interface.input.description=t)},{label:s(()=>[a(" Model input description. ")]),_:1},8,["modelValue"]),n(l,{modelValue:r(o).intended_use.production_requirements.interface.output.description,"onUpdate:modelValue":i[5]||(i[5]=t=>r(o).intended_use.production_requirements.interface.output.description=t)},{label:s(()=>[a(" Mode output description. ")]),_:1},8,["modelValue"]),e("div",Oe,[Le,je,e("div",null,[e("div",He,[n(l,{modelValue:r(o).intended_use.production_requirements.resources.gpu,"onUpdate:modelValue":i[6]||(i[6]=t=>r(o).intended_use.production_requirements.resources.gpu=t)},{label:s(()=>[a(" GPU ")]),_:1},8,["modelValue"])]),e("div",Ie,[n(l,{modelValue:r(o).intended_use.production_requirements.resources.cpu,"onUpdate:modelValue":i[7]||(i[7]=t=>r(o).intended_use.production_requirements.resources.cpu=t)},{label:s(()=>[a(" CPU ")]),_:1},8,["modelValue"])])]),e("div",null,[e("div",Je,[n(l,{modelValue:r(o).intended_use.production_requirements.resources.memory,"onUpdate:modelValue":i[8]||(i[8]=t=>r(o).intended_use.production_requirements.resources.memory=t)},{label:s(()=>[a(" Memory ")]),_:1},8,["modelValue"])]),e("div",ze,[n(l,{modelValue:r(o).intended_use.production_requirements.resources.storage,"onUpdate:modelValue":i[9]||(i[9]=t=>r(o).intended_use.production_requirements.resources.storage=t)},{label:s(()=>[a(" Storage ")]),_:1},8,["modelValue"])])])]),Qe,n(l,{modelValue:r(o).risks.fp,"onUpdate:modelValue":i[10]||(i[10]=t=>r(o).risks.fp=t)},{label:s(()=>[a(" False Positive Risk ")]),_:1},8,["modelValue"]),n(l,{modelValue:r(o).risks.fn,"onUpdate:modelValue":i[11]||(i[11]=t=>r(o).risks.fn=t)},{label:s(()=>[a(" False Negative Risk ")]),_:1},8,["modelValue"]),n(l,{modelValue:r(o).risks.other,"onUpdate:modelValue":i[12]||(i[12]=t=>r(o).risks.other=t)},{label:s(()=>[a(" Other risks of producing incorrect results ")]),_:1},8,["modelValue"]),We,Xe,Ke,Ye,e("div",Ze,[(p(!0),h(C,null,q(r(o).data,(t,m)=>(p(),h("div",{key:m},[e("h3",null,"Data Item "+y(m+1),1),n(l,{modelValue:t.access,"onUpdate:modelValue":d=>t.access=d},{label:s(()=>[a(" Account Access / Account Availability ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),e("div",null,[e("div",et,[n(l,{modelValue:t.description,"onUpdate:modelValue":d=>t.description=d},{label:s(()=>[a(" Data Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",tt,[n(l,{modelValue:t.source,"onUpdate:modelValue":d=>t.source=d},{label:s(()=>[a(" Source Data Location ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),n(f,{modelValue:t.classification,"onUpdate:modelValue":d=>t.classification=d,options:R},{label:s(()=>[a(" Data Classification ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),e("div",ot,[(p(!0),h(C,null,q(t.labels,(d,k)=>(p(),h("div",{key:k},[e("div",at,[n(l,{modelValue:d.description,"onUpdate:modelValue":c=>d.description=c},{label:s(()=>[a(" Label Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",lt,[n(l,{modelValue:d.percentage,"onUpdate:modelValue":c=>d.percentage=c,type:"number"},{label:s(()=>[a(" Percentage ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",nt,[n(v,{onClick:c=>Z(m,k)},{default:s(()=>[a(" Delete label ")]),_:2},1032,["onClick"])])]))),128)),n(g,{class:"margin-button",onClick:d=>Y(m)},{default:s(()=>[a(" Add additional label ")]),_:2},1032,["onClick"])]),e("div",st,[(p(!0),h(C,null,q(t.fields,(d,k)=>(p(),h("div",{key:k},[e("h3",it," Data Schema "+y(m+1)+" - "+y(k+1),1),e("div",null,[e("div",dt,[n(l,{modelValue:d.name,"onUpdate:modelValue":c=>d.name=c},{label:s(()=>[a(" Field Name ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",rt,[n(l,{modelValue:d.description,"onUpdate:modelValue":c=>d.description=c},{label:s(()=>[a(" Field Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),e("div",null,[e("div",ut,[n(l,{modelValue:d.type,"onUpdate:modelValue":c=>d.type=c},{label:s(()=>[a(" Field Type ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",ct,[n(l,{modelValue:d.expected_values,"onUpdate:modelValue":c=>d.expected_values=c},{label:s(()=>[a(" Expected Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),e("div",null,[e("div",mt,[n(l,{modelValue:d.missing_values,"onUpdate:modelValue":c=>d.missing_values=c},{label:s(()=>[a(" Missing Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",pt,[n(l,{modelValue:d.special_values,"onUpdate:modelValue":c=>d.special_values=c},{label:s(()=>[a(" Special Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),n(v,{class:"margin-button",onClick:c=>te(m,k)},{default:s(()=>[a(" Delete schema ")]),_:2},1032,["onClick"]),_t]))),128)),n(g,{class:"margin-button",onClick:d=>ee(m)},{default:s(()=>[a(" Add additional schema ")]),_:2},1032,["onClick"])]),n(l,{modelValue:t.rights,"onUpdate:modelValue":d=>t.rights=d},{label:s(()=>[a(" Data Rights "),n(_,null,{default:s(()=>[a(" Are there particular ways in which the data can and cannot be used? ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(l,{modelValue:t.policies,"onUpdate:modelValue":d=>t.policies=d},{label:s(()=>[a(" Data Policies "),n(_,null,{default:s(()=>[a(" Are there policies that govern the data and its use, such as Personally Identifiable Information [PII]? ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(l,{modelValue:t.identifiable_information,"onUpdate:modelValue":d=>t.identifiable_information=d},{label:s(()=>[a(" Identifiable Information ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(v,{class:"margin-button",onClick:d=>K(m)},{default:s(()=>[a(" Delete data item ")]),_:2},1032,["onClick"]),ht]))),128)),n(g,{class:"margin-button",onClick:i[13]||(i[13]=t=>X())},{default:s(()=>[a(" Add data item ")]),_:1})]),ft,vt,(p(!0),h(C,null,q(r(o).comments,(t,m)=>(p(),h("div",{key:m},[n(l,{modelValue:t.content,"onUpdate:modelValue":d=>t.content=d},null,8,["modelValue","onUpdate:modelValue"])]))),128)),bt,yt,e("div",Vt,[n(A,{class:"secondary-button",onClick:i[14]||(i[14]=t=>("cancelFormSubmission"in u?u.cancelFormSubmission:r(le))("/"))},{default:s(()=>[a(" Cancel ")]),_:1}),n(A,{class:"primary-button",disabled:"",onClick:i[15]||(i[15]=t=>I())},{default:s(()=>[a(" Export ")]),_:1}),n(A,{class:"primary-button",onClick:i[16]||(i[16]=t=>L())},{default:s(()=>[a(" Save ")]),_:1})])]),_:1})}}});export{Ct as default};
