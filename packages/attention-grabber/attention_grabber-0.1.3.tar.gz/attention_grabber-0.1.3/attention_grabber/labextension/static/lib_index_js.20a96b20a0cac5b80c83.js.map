{"version":3,"file":"lib_index_js.20a96b20a0cac5b80c83.js","mappings":";;;;;;;;;;;;;;;AACyE;AAEzE;;GAEG;AACH,MAAM,MAAM,GAAgC;IAC1C,EAAE,EAAE,0BAA0B;IAC9B,WAAW,EAAE,qFAAqF;IAClG,SAAS,EAAE,IAAI;IACf,QAAQ,EAAE,CAAC,kEAAgB,CAAC;IAC5B,QAAQ,EAAE,CAAC,GAAoB,EAAE,eAAiC,EAAE,EAAE;QACpE,OAAO,CAAC,GAAG,CAAC,sDAAsD,CAAC,CAAC;QAEpE,iCAAiC;QACjC,MAAM,YAAY,GAAG,IAAI,YAAY,EAAE,CAAC;QAExC,6BAA6B;QAC7B,IAAI,gBAAgB,GAAkB,IAAI,CAAC;QAC3C,IAAI,oBAAoB,GAAkB,IAAI,CAAC;QAC/C,IAAI,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,UAAU,GAA0B,IAAI,CAAC;QAC7C,IAAI,gBAAgB,GAAG,KAAK,CAAC;QAE7B,kDAAkD;QAClD,SAAS,aAAa;YACpB,SAAS,GAAG,IAAI,CAAC;YACjB,gBAAgB,GAAG,MAAM,CAAC,WAAW,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,CAAC,4BAA4B;QAC1F,CAAC;QAED,2DAA2D;QAC3D,SAAS,YAAY;YACnB,IAAI,oBAAoB,KAAK,IAAI,EAAE;gBACjC,YAAY,CAAC,oBAAoB,CAAC,CAAC;aACpC;YACD,IAAI,gBAAgB,KAAK,IAAI,EAAE;gBAC7B,aAAa,CAAC,gBAAgB,CAAC,CAAC;aACjC;YACD,oBAAoB,GAAG,IAAI,CAAC;YAC5B,gBAAgB,GAAG,IAAI,CAAC;YACxB,IAAI,SAAS,EAAE;gBACb,cAAc,EAAE,CAAC,CAAC,yBAAyB;gBAC3C,SAAS,GAAG,KAAK,CAAC;aACnB;QACH,CAAC;QAED,kEAAkE;QAClE,SAAS,cAAc;YACrB,IAAI,CAAC,SAAS,EAAE;gBACd,qBAAqB;gBACrB,UAAU,GAAG,YAAY,CAAC,gBAAgB,EAAE,CAAC;gBAC7C,UAAU,CAAC,IAAI,GAAG,MAAM,CAAC;gBACzB,UAAU,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,EAAE,YAAY,CAAC,WAAW,CAAC,CAAC;gBACpE,UAAU,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;gBAC7C,UAAU,CAAC,KAAK,EAAE,CAAC;gBAEnB,6BAA6B;gBAC7B,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,GAAG,KAAK,CAAC;aAC7C;iBAAM;gBACL,2CAA2C;gBAC3C,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,EAAE,CAAC;gBACnB,UAAU,GAAG,IAAI,CAAC;gBAClB,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,GAAG,EAAE,CAAC;aAC1C;YACD,SAAS,GAAG,CAAC,SAAS,CAAC;QACzB,CAAC;QAED,4EAA4E;QAC5E,iEAAe,CAAC,iBAAiB,CAAC,OAAO,CAAC,GAAG,EAAE;YAC7C,IAAI,gBAAgB,EAAE;gBACpB,IAAI,oBAAoB,KAAK,IAAI,EAAE;oBACjC,YAAY,CAAC,oBAAoB,CAAC,CAAC;iBACpC;gBACD,oBAAoB,GAAG,UAAU,CAAC,aAAa,EAAE,IAAI,CAAsB,CAAC,CAAC,yCAAyC;aACvH;QACH,CAAC,CAAC,CAAC;QAEH,iDAAiD;QACjD,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,0BAA0B,EAAE;YAClD,KAAK,EAAE,0BAA0B;YACjC,OAAO,EAAE,GAAG,EAAE;gBACZ,gBAAgB,GAAG,CAAC,gBAAgB,CAAC;gBACrC,IAAI,CAAC,gBAAgB;oBAAE,YAAY,EAAE,CAAC;YACxC,CAAC;SACF,CAAC,CAAC;QAEH,mDAAmD;QACnD,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC;YACtB,OAAO,EAAE,0BAA0B;YACnC,QAAQ,EAAE,cAAc;SACzB,CAAC,CAAC;QAEH,yEAAyE;QACzE,eAAe,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,aAAa,EAAE,EAAE;YAC7D,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;YAC3D,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;IACL,CAAC;CACF,CAAC;AAEF,iEAAe,MAAM,EAAC","sources":["webpack://attention-grabber/./src/index.ts"],"sourcesContent":["import { JupyterFrontEnd, JupyterFrontEndPlugin } from '@jupyterlab/application';\nimport { NotebookActions, INotebookTracker } from '@jupyterlab/notebook';\n\n/**\n * Initialization data for the attention-grabber extension.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'attention-grabber:plugin',\n  description: 'Flashes your screen when cells are finished, until you click on the notebook again.',\n  autoStart: true,\n  requires: [INotebookTracker],\n  activate: (app: JupyterFrontEnd, notebookTracker: INotebookTracker) => {\n    console.log('JupyterLab extension attention-grabber is activated!');\n\n    // Audio context for playing tone\n    const audioContext = new AudioContext();\n\n    // State management variables\n    let annoyingInterval: number | null = null;\n    let grabAttentionTimeout: number | null = null;\n    let isPlaying = false;\n    let oscillator: OscillatorNode | null = null;\n    let extensionEnabled = false;\n\n    // Function to start the attention-grabbing effect\n    function grabAttention() {\n      isPlaying = true;\n      annoyingInterval = window.setInterval(toggleAnnoying, 500); // Toggle effect every 500ms\n    }\n\n    // Function to stop the effect and clear timeouts/intervals\n    function stopAnnoying() {\n      if (grabAttentionTimeout !== null) {\n        clearTimeout(grabAttentionTimeout);\n      }\n      if (annoyingInterval !== null) {\n        clearInterval(annoyingInterval);\n      }\n      grabAttentionTimeout = null;\n      annoyingInterval = null;\n      if (isPlaying) {\n        toggleAnnoying(); // Ensure effect is reset\n        isPlaying = false;\n      }\n    }\n\n    // Function to toggle the annoying effect (sound and screen color)\n    function toggleAnnoying() {\n      if (!isPlaying) {\n        // Start playing tone\n        oscillator = audioContext.createOscillator();\n        oscillator.type = 'sine';\n        oscillator.frequency.setValueAtTime(2000, audioContext.currentTime);\n        oscillator.connect(audioContext.destination);\n        oscillator.start();\n\n        // Change screen color to red\n        document.body.style.backgroundColor = 'red';\n      } else {\n        // Stop playing tone and reset screen color\n        oscillator?.stop();\n        oscillator = null;\n        document.body.style.backgroundColor = '';\n      }\n      isPlaying = !isPlaying;\n    }\n\n    // Connect to notebook action to initiate grabAttention after cell execution\n    NotebookActions.selectionExecuted.connect(() => {\n      if (extensionEnabled) {\n        if (grabAttentionTimeout !== null) {\n          clearTimeout(grabAttentionTimeout);\n        }\n        grabAttentionTimeout = setTimeout(grabAttention, 3000) as unknown as number; // Start effect 3 seconds after execution\n      }\n    });\n\n    // Command to toggle the extension's active state\n    app.commands.addCommand('toggle-attention-grabber', {\n      label: 'Toggle Attention Grabber',\n      execute: () => {\n        extensionEnabled = !extensionEnabled;\n        if (!extensionEnabled) stopAnnoying();\n      }\n    });\n\n    // Add context menu item for toggling the extension\n    app.contextMenu.addItem({\n      command: 'toggle-attention-grabber',\n      selector: '.jp-Notebook'\n    });\n\n    // Attach event listeners to stop the annoying effect on user interaction\n    notebookTracker.widgetAdded.connect((tracker, notebookPanel) => {\n      notebookPanel.node.addEventListener('click', stopAnnoying);\n      notebookPanel.node.addEventListener('keydown', stopAnnoying);\n    });\n  }\n};\n\nexport default plugin;\n"],"names":[],"sourceRoot":""}